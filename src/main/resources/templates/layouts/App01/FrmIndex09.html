<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<header th:fragment="headerFragment">
    <!-- py-md-2 px-1 py-1 -->
    <div class="card-body d-flex align-items-center py-md-2 px-auto py-auto ">
        <main class="main" id="top"> 
            <div class="container-fluid"> 
                <script>
                    var isFluid = JSON.parse(localStorage.getItem('isFluid'));
                    if (isFluid) {
                        var container = document.querySelector('[data-layout]');
                        container.classList.remove('container');
                        container.classList.add('container-fluid');
                    }
                </script>

                <nav class="navbar navbar-light navbar-vertical navbar-expand-xl">
                    <script>
                        var navbarStyle = localStorage.getItem("navbarStyle");
                        if (navbarStyle && navbarStyle !== 'transparent') {
                            document.querySelector('.navbar-vertical').classList.add(`navbar-${navbarStyle}`);
                        }
                    </script>
                    <div class="d-flex align-items-center">
                        <div class="toggle-icon-wrapper">

                            <button class="btn navbar-toggler-humburger-icon navbar-vertical-toggle"
                                data-bs-toggle="tooltip" data-bs-placement="left" title="Toggle Navigation"><span
                                    class="navbar-toggle-icon"><span class="toggle-line"></span></span></button>

                        </div><a class="navbar-brand" href="@{/user}">
                            <!-- <div class="d-flex align-items-center py-3"><img class="me-2"
                                    th:src="@{assets/img/icons/spot-illustrations/falcon.png}" alt="" width="40" /><span
                                    class="font-sans-serif">ActasErp</span>
                            </div> -->
                        </a>
                    </div> 
                    <!------navbar vertical------>     
                    <div th:replace="layouts/layout01/navbarMemWeb :: navbar"></div>  
                </nav>
                <div class="content" id="index02"> 
                    <!------nav ------>
                    <!-- <div th:replace="layouts/layout01/headerNavWeb :: headerNav"></div>   -->

                    <body layout:fragment="index02"> 
                    <!-- ######################### ######################### ######################### ######################### ######################### ######################### -->

<!-- contents body 시작--> 
<!-- form 또는 action 으로 받아오기  --> 
<div class="con">  
    <div class="card-body bg-light">
        <div class="card-body">
            <div class="row">
                <form class="row gy-2 gx-4 align-items-center" role="form"  method="post" enctype="multipart/form-data">
                    <div class="row mb-3  row-cols-lg-2 align-items-center">
                        <!-- <div class="col-auto">  
                                <div class="card text-white bg-secondary">
                                <div class="card-body">
                                    <div class="card-title"  ><h3 th:text="${CommDto.MenuTitle}" style="color:white; text-align: center; ">사출공정</h3> </div> 
                                </div>
                                </div> 
                        </div>                                -->  
                        <div class="col-auto"> 
                            <button  class="btn btn-outline-info me-1 mb-1" type="button" id="workstartBtn"  style=" height:50px;  ">작업지시리스트 </button>
                            <button  class="btn btn-outline-warning me-1 mb-1" type="button" id="workingBtn"  style=" height:50px;  ">사출조회</button>
                        </div>              
                        <div class="col-auto">  
                                <div class="col-auto">
                                    <div id="statusdis01"></div>  
                                    <ul class="nav nav-pills mb-3" role="tablist" id="pill-tab2">
                                        <li class="nav-item" role="presentation">
                                        <button class="nav-link " id = "btnstep01" data-wizard-step="data-wizard-step" data-bs-toggle="pill" data-bs-target="#form-wizard-progress-tab1" type="button" role="tab" aria-controls="form-wizard-progress-tab1" aria-selected="true"><svg class="svg-inline--fa fa-lock fa-w-14 me-2" data-fa-transform="shrink-2" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="lock" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg="" style="transform-origin: 0.4375em 0.5em;"><g transform="translate(224 256)"><g transform="translate(0, 0)  scale(0.875, 0.875)  rotate(0 0 0)"><path fill="currentColor" d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z" transform="translate(-224 -256)"></path></g></g></svg> 
                                            <span class="d-none d-md-inline-block fs--1"  ><b>작업시작</b></span></button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                        <button class="nav-link " id = "btnstep02"  data-wizard-step="data-wizard-step" data-bs-toggle="pill" data-bs-target="#form-wizard-progress-tab2" type="button" role="tab" aria-controls="form-wizard-progress-tab2" aria-selected="false"><svg class="svg-inline--fa fa-user fa-w-14 me-2" data-fa-transform="shrink-2" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="user" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg="" style="transform-origin: 0.4375em 0.5em;"><g transform="translate(224 256)"><g transform="translate(0, 0)  scale(0.875, 0.875)  rotate(0 0 0)"><path fill="currentColor" d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z" transform="translate(-224 -256)"></path></g></g></svg>
                                            <span class="d-none d-md-inline-block fs--1" ><b>작업중</b></span></button>
                                        </li> 
                                        <li class="nav-item" role="presentation">
                                        <button class="nav-link" id = "btnstep03"  data-wizard-step="data-wizard-step" data-bs-toggle="pill" data-bs-target="#form-wizard-progress-tab3" type="button" role="tab" aria-controls="form-wizard-progress-tab3" aria-selected="false"><svg class="svg-inline--fa fa-dollar-sign fa-w-9 me-2" data-fa-transform="down-2 shrink-2" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="dollar-sign" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 288 512" data-fa-i2svg="" style="transform-origin: 0.28125em 0.625em;"><g transform="translate(144 256)"><g transform="translate(0, 64)  scale(0.875, 0.875)  rotate(0 0 0)"><path fill="currentColor" d="M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z" transform="translate(-144 -256)"></path></g></g></svg>
                                            <span class="d-none d-md-inline-block fs--1" ><b>임시중단</b></span></button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                        <button class="nav-link" id = "btnstep04"  data-wizard-step="data-wizard-step" data-bs-toggle="pill" data-bs-target="#form-wizard-progress-tab4" type="button" role="tab" aria-controls="form-wizard-progress-tab4" aria-selected="false"><svg class="svg-inline--fa fa-thumbs-up fa-w-16 me-2" data-fa-transform="shrink-2" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="thumbs-up" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="" style="transform-origin: 0.5em 0.5em;"><g transform="translate(256 256)"><g transform="translate(0, 0)  scale(0.875, 0.875)  rotate(0 0 0)"><path fill="currentColor" d="M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z" transform="translate(-256 -256)"></path></g></g></svg>
                                            <span class="d-none d-md-inline-block fs--1" ><b>작업완료</b></span></button>
                                        </li>
                                    </ul>  
                                </div>   
                        </div> 
                    </div>
                    <!------content ---------------------------------------------------------------------------------->
                    <div class="row mb-3 row-cols-sm-3 align-items-center">
                        <div class="col-sm">
                            <label class="visually-hidden" for="autoSizingInputGroup">작지번호</label>
                            <div class="input-group">
                                <div class="input-group-text">작지번호</div>
                                <input class="form-control form-control-sm" id="inplan_no"
                                    type="text" placeholder="작지번호"  style="height: 40px;"  disabled />
                                <input class="form-control form-control-sm"  type="hidden"  id="inspjangcd"/>   
                                <input class="form-control form-control-sm"  type="hidden"  id="incustcd"/>       
                                <input class="form-control form-control-sm"  type="hidden"  id="inwono"  />       
                                <input class="form-control form-control-sm"  type="hidden"  id="inwseq"  />         
                                <input class="form-control form-control-sm"  type="hidden"  id="inwflag" />   
                                <input class="form-control form-control-sm"  type="hidden"  id="inwscnt" value=0   />  
                                <input class="form-control form-control-sm"  type="hidden"  id="edwscnt" value=0   />  
                                <input class="form-control form-control-sm"  type="hidden"  id="inwsyul" value=0   />   
                                <input class="form-control form-control-sm"  type="hidden"  id="inostore"value=0   />   
                                <input class="form-control form-control-sm"  type="hidden"  id="instopcd" />   
                                <input class="form-control form-control-sm"  type="hidden"  id="instopnm" />    
                                <input class="form-control form-control-sm"  type="hidden"  id="inwbgubn" />  
                                <div id='inwonobdg'></div>      
                                                                                            
                            </div> 
                        </div>
                        <div class="col-sm">
                            <div class="input-group">
                                <div class="input-group-text">거래처</div>
                                <input class="form-control form-control-sm" id="incltnm" type="text" disabled
                                    size="15" placeholder="거래처"   style="height: 40px;"  />
                                <input class="form-control form-control-sm"  type="hidden"  id="incltcd"    />  
                            </div>
                        </div> 
                        <div class="col-sm"> 
                            <div class="input-group">
                                <div class="input-group-text">품목명</div> 
                                <input class="form-control form-control-sm" id="inpname" type="text" disabled
                                    size="15" style="height: 40px;" /> 
                                <input class="form-control form-control-sm" id="inpcode" type="hidden" disabled
                                    size="15"  />     
                            </div>
                        </div> 
                        <!-- <div class="col-sm">
                            <div class="input-group">
                                <div class="input-group-text">품목코드</div> 
                                <input class="form-control form-control-sm" id="inpcode" type="text" disabled
                                    size="15"  /> 
                            </div>
                        </div> -->
                    </div>
                    <div class="row mb-3 row-cols-lg-3 align-items-center">
                        <div class="col-sm">
                            <div class="input-group"> 
                                <div class="input-group-text">LOTNO</div> 
                                <input class="form-control form-control-sm" id="inlotno" type="text" disabled
                                    size="15" style="height: 40px;" /> 
                            </div>
                        </div> 
                        <div  class="col-3">
                            <div class="input-group">
                                <div class="input-group-text">계획량</div>
                                <input class="form-control form-control-sm" id="prod_qty" type="number" disabled style="height: 40px;"
                                    placeholder=""  />
                            </div>
                        </div>  
                        <div class="col-3">
                            <div class="input-group"> 
                                <div class="input-group-text">설비</div>
                                <input class="form-control form-control-sm" id="inmachname" type="text"    disabled style="height: 40px;"
                                    placeholder=""   />
                                <input class="form-control form-control-sm" id="inwrmc" type="hidden"  placeholder=""   /> 
                                <input class="form-control form-control-sm" id="injgumtype" type="hidden"  placeholder=""   /> 
                                <input class="form-control form-control-sm" id="injgumnm" type="hidden"  placeholder=""   /> 
                                <div id='inwrmcbdg'></div>
                            </div>    
                        </div>  
                    </div>
                    <div class="row mb-3 row-cols-lg-3 align-items-center"> 
                        <div class="col-auto">
                            <div class="input-group">
                                <!-- <div class="input-group-text">작업자</div> -->
                                <button   class="btn btn-primary btn-sm" type="button" data-bs-toggle="modal" data-bs-target="#wperidmodal"  id="wperidBtn">1.작업자 </button>
                                    <input class="form-control form-control-sm" id="inwrpsnm" type="text"  disabled  placeholder=""  />
                                    <input class="form-control form-control-sm" id="inwrps" type="hidden"  placeholder=""   />
                                    <input class="form-control form-control-sm" id="inwinps" type="hidden"  placeholder=""   />
                            </div> 
                        </div>
                        <!-- <div class="col-4">
                            <div class="input-group"> 
                                <button   class="btn btn-primary btn-sm" type="button" data-bs-toggle="modal" data-bs-target="#wrmcmodal"  id="wrmcBtn" >작업설비 </button>
                                
                            </div>
                        </div> -->
                        <div class="col-3">
                            <div class="input-group"> 
                                <button   class="btn btn-primary btn-sm" type="button" id="partbtn"    >2.원재료선택 </button> 
                                <input class="form-control form-control-sm" id="inpartnm" type="text" placeholder="" disabled />
                                <input class="form-control form-control-sm" id="inpartcode" type="hidden" placeholder=""  />  
                                <input class="form-control form-control-sm" id="injchajong" type="hidden" placeholder=""  />  
                                <input class="form-control form-control-sm" id="injpumcode" type="hidden" placeholder=""  />  
                                
                            </div>
                        </div> 
                        <div class="col-3">
                            <div class="input-group"> 
                                <button   class="btn btn-primary btn-sm" type="button" id="subpartbtn"    >3.부재료선택 </button> 
                                <input class="form-control form-control-sm" id="insubpartnm" type="text" placeholder="" disabled />
                                <input class="form-control form-control-sm" id="insubpartcode" type="hidden" placeholder=""  /> 
                            </div>
                        </div> 
                    </div> 
                    <div class="row mb-3 row-cols-lg-3 align-items-center">
                        <div class="col-auto">
                            <div class="input-group"> 
                                <button   class="btn btn-primary btn-sm" type="button" id="wfrdt"    >4.작업시작 </button>
                                <input type="text"  class="form-control datetimepicker" id="startDate" autocomplete="off"  placeholder="Y-m-d H:i"   disabled> 
                            </div> 
                        </div>
                        <div  class="col-3">
                            <div class="input-group">
                                <!-- <div class="input-group-text">불량내역</div> --> 
                                <button   class="btn btn-primary btn-sm" type="button" id="wbadqtyBtn"    >5.불량내역 </button>
                                <!-- <button   class="btn btn-primary btn-sm" type="button" data-bs-toggle="modal" data-bs-target="#wbadqtymodal"  id="wbadqtyBtn">불량내역 </button> -->
                                <input class="form-control form-control-sm"  type="text" id="inwbdqt"  disabled
                                    placeholder=""  />
                            </div>
                        </div> 
                        <div class="col-auto">
                            <div class="input-group"> 
                                <button   class="btn btn-primary btn-sm" type="button"  id="wtrdt"    >6.작업종료 </button>
                                <input type="text"  class="form-control datetimepicker" id="endDate" autocomplete="off"  placeholder="Y-m-d H:i"   disabled > 
                            </div>
                        </div> 
                    </div>
                    <div class="row mb-3 row-cols-lg-3 align-items-center">
                        <!-- <div class="col-auto">
                            <div class="input-group">
                                <div class="input-group-text">투입량</div>
                                <input class="form-control form-control-sm" id="inwinqt" type="hidden" data-bs-toggle="modal" data-bs-target="#wiworkmodal"  
                                    placeholder=""   />
                                <div id='inwinqtbdg'></div>      
                            </div>
                        </div>   -->
                        <div class="col-4">
                            <div class="input-group">
                                <!-- <button   class="btn btn-primary btn-sm" type="button" id="wotqtyBtn"    >생산량 </button> -->
                                <!-- <button   class="btn btn-primary btn-sm" type="button" data-bs-toggle="modal" data-bs-target="#wotqtymodal"  id="wotqtyBtn">생산량 </button> -->                                                        
                                <div class="input-group-text">생산량</div>
                                <input class="form-control form-control-sm"  type="number" id="inwotqt"
                                    placeholder=""  style="height: 40px;"  onchange="fnc_calvalue(this)"   />
                                <input class="form-control form-control-sm" id="inwinqt" type="hidden" data-bs-toggle="modal" data-bs-target="#wiworkmodal"    placeholder=""   />
                                 <div id='inwinqtbdg'></div>     
                            </div>
                        </div>
                        <div  class="col-3">
                            <div class="input-group">
                                <div class="input-group-text">완료량</div>
                                <input class="form-control form-control-sm" id="inwokqt" type="number"  style="height: 40px;"
                                    placeholder=""  />
                            </div>
                        </div>
                        <div  class="col-3">
                            <div class="input-group">                                                     
                                <div class="input-group-text">비고</div>
                                <input class="form-control form-control-sm" id="inwremark" type="text"  style="height: 40px;"
                                    placeholder=""  />
                            </div>
                        </div>   
                    </div>
                    <div class="row mb-3 row-cols-lg-3 align-items-center"> 
                        <div class="col-auto">
                            <div id="wscntdis01"></div>
                        </div>
                        <div class="col-auto">
                            <div id="wscntdis02"></div>
                        </div>
                    </div> 
                    <div class="row mb-3  row-cols-lg-3 align-items-center"> 
                    </div>  
                    
                    <div  class="col-auto" > 
                        <div class="row g-2" >
                            <div class="col-auto">
                                <button  class="btn btn-warning me-1 mb-1" type="button" style=" height:50px;  " onclick='save_btn("2")' id="workstBtn"  >재시작</button>
                            </div> 
                            <div class="col-auto">
                                <button  class="btn btn-danger me-1 mb-1" type="button" style=" height:50px;  "   id="workedBtn"  >임시중단</button>
                            </div>   
                            <div class="col-auto">
                                <button  class="btn btn-outline-dark me-1 mb-1" type="button" style=" height:50px;  " onclick='save_btn("4")' id="worksaveBtn">저&nbsp;&nbsp;&nbsp;장</button>
                            </div>                                                   
                            <div class="col-auto">
                                <button  class="btn btn-outline-primary me-1 mb-1" type="button" style=" height:50px;  " onclick='del_btn()' >삭&nbsp;&nbsp;&nbsp;제 </button>
                            </div>                                               
                            <div class="col-auto">
                                <button  class="btn btn-outline-primary me-1 mb-1" type="button" style=" height:50px;  " onclick='prt_btn()' >출&nbsp;&nbsp;&nbsp;력 </button>
                            </div> 
                            <div class="col-auto">
                                <div id="statusdis01"></div><input class="form-control form-control-sm"  type="hidden"  id="indecision"  />  
                            </div> 
                            <!-- <div id="barcode"  ></div> -->

                            <!-- <div class="print-area" id="printArea" style="display: none;">
                                <img id="barcodeImage" src="" alt="Generated Barcode" class="barcode-image">
                                <div class="details">
                                    <p id="itemName">Item Name: Sample Item</p>
                                    <p id="quantity">Quantity: 10</p>
                                    <p id="companyName">Company: ABC Corp</p>
                                </div>
                            </div> -->
                            <!-- <img id="barcodeImage" src=""  style="width: 300px; height: 100px;"> -->

                            <!-- <div class="col-auto">
                                <button  class="btn btn-outline-primary me-1 mb-1" type="button" style=" height:50px;  ">공정생성 </button>
                            </div>  -->
                            <!-- <div class="col-auto"> 
                                <button class="badge-soft-primary dropdown-item rounded-1" type="submit"  >저장</button>
                            </div>
                            <div class="col-auto"> 
                                <button class="badge-soft-danger dropdown-item rounded-1" type="button"  onclick='del_btn()' >삭제 </button>
                            </div> -->
                        </div>      
                    </div>                
                </form>

                    <input class="form-control form-control-sm"  type="hidden" id="inworkstartbtn" data-bs-toggle="modal" data-bs-target="#staticBackdrop"  /> 
                    <div class="modal fade" id="staticBackdrop" data-bs-keyboard="false"
                        data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
                        aria-hidden="true">
                        <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm01"
                            style="max-width: 1150px">
                            <div class="modal-content border-0">
                                <div class="modal-body p-0" >
                                    <div class="bg-light rounded-top-lg py-3 ps-4 pe-6">
                                        <h4 class="mb-1" id="staticBackdropLabel">작업지시리스트</h4> 
                                    </div>
                                    <div class="container-fluid"> 
                                        <div id="theGrid_div" style="overflow:scroll; width: 1100px;  height:300px;    margin:0 auto; "></div>
                                        <!-- <div id="thePager01"></div> -->
                                    </div>     
                                </div>  
                                <div class="modal-footer">
                                    <div class="row g-1">
                                        <!-- <div class="col-auto">
                                            <input type="text"  class="form-control datetimepicker"  onkeypress="barcode_enter(event)" id="searchOrdDate" autocomplete="off"  placeholder="Lot No"   >
                                        </div> -->   
                                        <div class="col-auto"> 
                                            <div class="input_wrap" style="max-width: 325px;"> 
                                                <select th:field="*{wrmcDto}" name="con_wrmc" id="con_wrmc">
                                                    <option value="">호기</option>
                                                    <option th:each="val : ${wrmcDto}" th:value="${val.wrmc}" th:text="${val.wrmcnm}">
                                                </select>                                              
                                            </div>        
                                        </div>
                                        <div class="col-auto">
                                            <div class="dropdown-container">
                                                <select class="form-select" aria-label="Default select example" id="inmonth">
                                                    <option selected="">월</option>
                                                    <option value="1월">1월</option>
                                                    <option value="2월">2월</option>
                                                    <option value="3월">3월</option>
                                                    <option value="4월">4월</option>
                                                    <option value="5월">5월</option>
                                                    <option value="6월">6월</option>
                                                    <option value="7월">7월</option>
                                                    <option value="8월">8월</option>
                                                    <option value="9월">9월</option>
                                                    <option value="10월">10월</option>
                                                    <option value="11월">11월</option>
                                                    <option value="12월">12월</option>
                                                </select>  
                                                <!-- <input type="text"  id="searchtxt" placeholder="LOTNO" style="width: 300px; padding: 10px; font-size: 16px;"> -->
                                                
                                            </div>
                                        </div>    
                                        <div class="col-auto">
                                            <div class="dropdown-container"> 
                                                <select class="form-select" aria-label="Default select example"  id="inweeks">
                                                    <option selected="">주차</option>
                                                    <option value="1">1주차</option>
                                                    <option value="2">2주차</option>
                                                    <option value="3">3주차</option>
                                                    <option value="4">4주차</option>
                                                    <option value="5">5주차</option>
                                                    <option value="6">6주차</option>
                                                </select>  
                                                <!-- <input type="text"  id="searchtxt" placeholder="LOTNO" style="width: 300px; padding: 10px; font-size: 16px;"> -->
                                            </div>
                                        </div>    
                                        <div class="col-auto">
                                            <button class="btn btn-primary" type="button"  id="searchBtn"  >조회 </button>
                                        </div>
                                        <div class="col-auto">
                                            <button class="btn btn-secondary me-1 mb-1" id="wlistBtn" type="button" data-bs-dismiss="modal">Close
                                            </button>
                                        </div>
                                        <!-- <div class="col-auto">
                                            <button class="badge-soft-info dropdown-item rounded-1"
                                                type="submit">저장 </button>
                                        </div> -->
                                    </div>
                                </div>   

                            </div>
                        </div> 
                    </div>         
                 
                <!--------------------------------------------------------------------------------------->

                <input class="form-control form-control-sm"  type="hidden" id="inworkingbtn" data-bs-toggle="modal" data-bs-target="#staticBackdrop_sa"  /> 
                <div class="modal fade" id="staticBackdrop_sa" data-bs-keyboard="false"
                    data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm06"
                        style="max-width: 1150px">
                        <div class="modal-content border-0">
                            <div class="modal-body p-0" >
                                <div class="bg-light rounded-top-lg py-3 ps-4 pe-6">
                                    <h4 class="mb-1" id="staticBackdropLabel">사출리스트</h4> 
                                </div>
                                <div class="container-fluid"> 
                                    <div id="theGridSA_div" style="overflow:scroll; width: 1100px;  height:300px;    margin:0 auto; "></div>
                                    <!-- <div id="thePager01"></div> -->
                                </div>     
                            </div>  
                            <div class="modal-footer">
                                <div class="row g-1">
                                    <!-- <div class="col-auto">
                                        <input type="text"  class="form-control datetimepicker"  onkeypress="barcode_enter(event)" id="searchOrdDate" autocomplete="off"  placeholder="Lot No"   >
                                    </div> --> 
                                    <div class="col-auto">
                                        <div class="dropdown-container">
                                            <select class="form-select" aria-label="Default select example" id="inmonth_sa">
                                                <option selected="">월</option>
                                                <option value="1월">1월</option>
                                                <option value="2월">2월</option>
                                                <option value="3월">3월</option>
                                                <option value="4월">4월</option>
                                                <option value="5월">5월</option>
                                                <option value="6월">6월</option>
                                                <option value="7월">7월</option>
                                                <option value="8월">8월</option>
                                                <option value="9월">9월</option>
                                                <option value="10월">10월</option>
                                                <option value="11월">11월</option>
                                                <option value="12월">12월</option>
                                            </select>   
                                        </div>
                                    </div>    
                                    <div class="col-auto">
                                        <div class="dropdown-container"> 
                                            <select class="form-select" aria-label="Default select example"  id="inweeks_sa">
                                                <option selected="">주차</option>
                                                <option value="1">1주차</option>
                                                <option value="2">2주차</option>
                                                <option value="3">3주차</option>
                                                <option value="4">4주차</option>
                                                <option value="5">5주차</option>
                                                <option value="6">6주차</option>
                                            </select>   
                                        </div>
                                    </div>        
                                    <div class="col-auto"> 
                                         <input type="text"  id="searchtxt" placeholder="LOTNO" style="width: 300px; padding: 10px; font-size: 16px;">  
                                    </div>    
                                    <div class="col-auto">
                                        <button class="btn btn-primary" type="button"  id="searchBtn02"  >조회 </button>
                                    </div>
                                    <div class="col-auto">
                                        <button class="btn btn-secondary me-1 mb-1" id="wlistsaBtn" type="button" data-bs-dismiss="modal">Close
                                        </button>
                                    </div>
                                    <!-- <div class="col-auto">
                                        <button class="badge-soft-info dropdown-item rounded-1"
                                            type="submit">저장 </button>
                                    </div> -->
                                </div>
                            </div>   

                        </div>
                    </div> 
                </div>         
             
            <!--------------------------------------------------------------------------------------->


                <!--------------------------------------------------------------------------------------->  
                <form    role="form"   th:object="${wrmcDto}" th:action="@{/popup/wrmc}" method="post" enctype="multipart/form-data" >
                    <div class="modal fade" id="wrmcmodal" data-bs-keyboard="false"
                    data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
                    aria-hidden="true">
                        <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm02"
                            style="max-width: 500px">
                            <div class="modal-content border-0">
                                <div class="modal-body p-0" > 
                                    <div class="rounded-top-lg py-3 ps-4 pe-6 bg-light"  >
                                        <h4 class="mb-1" id="modalExampleDemoLabel">작업설비</h4>
                                    </div>
                                    <!-- <div class="row mb-3 row-cols-lg-2 align-items-center"> 
                                        <div class="col-auto">
                                            <div class="input-group">
                                                <div class="input-group-text">설비검색</div>
                                                <input class="form-control form-control-sm" id="searchCode" type="text"  
                                                    placeholder="설비코드 / 설비명"     /> 
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <button class="btn btn-falcon-warning me-1 mb-1" id="wrmcBtn" type="button" onclick="searchwrmc_fnc()">검색
                                            </button>
                                        </div> 
                                    </div>   -->

                                    <div class="container-fluid"> 
                                        <div class="col-auto">
                                            <div class="input-group">
                                                <div class="input-group-text">설비검색</div>
                                                <input class="form-control form-control-sm" id="searchCode" type="text"  
                                                    placeholder="설비코드 / 설비명"     /> 
                                                <button class="btn btn-falcon-warning me-1 mb-1" id="wrmcSearchBtn" type="button" >검색
                                                </button>
                                            </div>
                                        </div> 
                                    </div>                             
                                    <div class="container-fluid"> 
                                        <div id="wrmcGrid_div" ></div>
                                        <!-- <div id="thePager02"></div> -->
                                    </div>                                                                 

                                </div>  
                                <div class="modal-footer">
                                    <div class="row g-1">
                                        <div class="col-auto">
                                            <button class="badge-soft-primary dropdown-item rounded-1"
                                                type="button" id="wrmcmodal_btn" data-bs-dismiss="modal">Close</button>
                                        </div>
                                        <!-- <div class="col-auto">
                                            <button class="badge-soft-info dropdown-item rounded-1"
                                                type="submit">저장 </button>
                                        </div> -->
                                    </div>
                                </div>   

                            </div>
                        </div> 
                    </div>           
                </form>
                <!---------------------------------------------------------------------------------------> 
                <!--------------------------------------------------------------------------------------->    
                <form    role="form"   th:object="${wperidDto}" th:action="@{/popup/wperid}" method="post" enctype="multipart/form-data" >
                    <div class="modal fade" id="wperidmodal" data-bs-keyboard="false"
                    data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
                    aria-hidden="true">
                        <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm03"
                            style="max-width: 500px">
                            <div class="modal-content border-0">
                                <div class="modal-body p-0" > 
                                    <div class="rounded-top-lg py-3 ps-4 pe-6 bg-light">
                                        <h4 class="mb-1" id="modalExampleDemoLabel">작업자</h4>
                                    </div> 
                                    <div  class="container-fluid"> 
                                        <div class="col-auto">
                                                <!-- <p> 현재 <b><span id="checked-count">0</span></b> 명이 선택되었습니다. </p> -->
                                            <!-- <div class="input-group">
                                                <div class="input-group-text">작업자검색</div>
                                                <input class="form-control form-control-sm" id="searchCode" type="text"  
                                                    placeholder="작업자명"     /> 
                                                <button class="btn btn-falcon-warning me-1 mb-1" type="button" onclick="searchwperid_fnc()">검색
                                                </button> 
                                            </div>  -->
                                        </div> 
                                    </div>     

                                    <div class="container-fluid"> 
                                        <div id="wperidGrid_div" ></div>
                                        <!-- <div id="thePager03"></div> -->
                                    </div>                                                                 

                                </div>  
                                <div class="modal-footer">
                                    <div class="row g-1">
                                        <div class="col-auto">
                                            <button class="badge-soft-primary dropdown-item rounded-1"
                                                type="button" id="wperidmodal_btn" data-bs-dismiss="modal">Close</button>
                                        </div> 
                                    </div>
                                </div>   

                            </div>
                        </div> 
                    </div>         
                </form>
                <!--------------------------------------------------------------------------------------->    
                
                <input class="form-control form-control-sm"  type="hidden" id="inbadqtybtn" data-bs-toggle="modal" data-bs-target="#wbadqtymodal"  />
                <!--------------------------------------------------------------------------------------->    
                <div class="modal fade" id="wbadqtymodal" data-bs-keyboard="false"
                    data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm05"
                        style="max-width: 700px">
                        <div class="modal-content border-0">
                            <div class="modal-body p-0" > 
                                <div class="rounded-top-lg py-3 ps-4 pe-6 bg-light">
                                    <h4 class="mb-1" id="modalExampleDemoLabel">불량구분</h4>
                                </div>       
                                <div  class="container-fluid"> 
                                    <div class="col-auto">
                                            <!-- <p> 현재 <b><span id="checked-count">0</span></b> 명이 선택되었습니다. </p> -->
                                        <div class="input-group"> 
                                            <div class="input_wrap" style="max-width: 325px;"> 
                                                <select th:field="*{wbadDDDto}" name="con_wcode" id="con_wcode">
                                                    <option value="">불량구분</option>
                                                    <option th:each="val : ${wbadDDDto}" th:value="${val.wcode}" th:text="${val.wcdnm}">
                                                </select>                                              
                                            </div>      

                                            <div class="input-group-text">불량수량</div>
                                            <input class="form-control form-control-sm"  type="number" id="popbadqty"  placeholder=""      /> 

                                            <button class="btn btn-falcon-warning me-1 mb-1" type="button" onclick="savebad_fnc()">등록
                                            </button> 
                                            <button class="btn btn-falcon-warning me-1 mb-1" type="button" id="popsearch03" >조회
                                            </button> 
                                            <!-- <button class="btn btn-falcon-danger me-1 mb-1" type="button" id="popsearch02" onclick="workbadDel()">삭제 -->
                                            </button>  
                                        </div> 
                                    </div> 
                                </div>  

                                <div class="container-fluid"> 
                                    <div id="wbadGrid_div" ></div>
                                    <!-- <div id="thePager05"></div> -->
                                </div>    
                            </div>  
                            <div class="modal-footer">
                                <div class="row g-1">
                                    <div class="col-auto">
                                        <button class="badge-soft-primary dropdown-item rounded-1"  id="wbadqtymodal_btn"
                                            type="button" data-bs-dismiss="modal">Close</button>
                                    </div>
                                    <!-- <div class="col-auto">
                                        <button class="badge-soft-info dropdown-item rounded-1"
                                            type="submit">저장 </button>
                                    </div> -->
                                </div>
                            </div>   

                        </div>
                    </div> 
                </div>          
                <!--------------------------------------------------------------------------------------->   
                
                <input class="form-control form-control-sm"  type="hidden" id="instopbtn" data-bs-toggle="modal" data-bs-target="#wstopmodal"  /> 
                <!--------------------------------------------------------------------------------------->    
                <div class="modal fade" id="wstopmodal" data-bs-keyboard="false"
                    data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm05"
                        style="max-width: 500px">
                        <div class="modal-content border-0">
                            <div class="modal-body p-0" > 
                                <div class="rounded-top-lg py-3 ps-4 pe-6 bg-light">
                                    <h4 class="mb-1" id="modalExampleDemoLabel">비가동사유</h4>
                                </div>    

                                <div class="container-fluid"> 
                                    <div id="wstopGrid_div" ></div> 
                                </div>    
                            </div>  
                            <div class="modal-footer">
                                <div class="row g-1">
                                    <div class="col-auto">
                                        <button class="badge-soft-primary dropdown-item rounded-1"
                                            type="button" id="wstopmodal_btn"  data-bs-dismiss="modal">Close</button>
                                    </div>
                                    <!-- <div class="col-auto">
                                        <button class="badge-soft-info dropdown-item rounded-1"
                                            type="submit">저장 </button>
                                    </div> -->
                                </div>
                            </div>   

                        </div>
                    </div> 
                </div>          
                <!--------------------------------------------------------------------------------------->   
                
                
                <input class="form-control form-control-sm"  type="hidden" id="injglistbtn" data-bs-toggle="modal" data-bs-target="#wjglistmodal"  /> 
                <!--------------------------------------------------------------------------------------->    
                <div class="modal fade" id="wjglistmodal" data-bs-keyboard="false"
                    data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm05"
                        style="max-width: 700px">
                        <div class="modal-content border-0">
                            <div class="modal-body p-0" > 
                                <div class="rounded-top-lg py-3 ps-4 pe-6 bg-light">
                                    <h4 class="mb-1" id="modalExampleDemoLabel">자재목록</h4>
                                </div>     
                                <div class="container-fluid"> 
                                    <div class="col-auto">
                                        <div class="input-group">
                                            <div class="input-group-text">품목검색</div>
                                            <input class="form-control form-control-sm" id="searchjqty" type="text"  
                                                placeholder="품목명"     /> 
                                            <button class="btn btn-falcon-warning me-1 mb-1" id="jqtySearchBtn" type="button" >검색
                                            </button>
                                            <input type="hidden" id="wonflag" name = "wonflag" >
                                        </div>
                                    </div> 
                                </div>       
                                <div class="container-fluid"> 
                                    <div id="wjglistGrid_div" ></div> 
                                </div>    
                            </div>  
                            <div class="modal-footer">
                                <div class="row g-1">
                                    <div class="col-auto">
                                        <button class="badge-soft-primary dropdown-item rounded-1"
                                            type="button" id="wjglistmodal_btn"  data-bs-dismiss="modal">Close</button>
                                    </div>
                                    <!-- <div class="col-auto">
                                        <button class="badge-soft-info dropdown-item rounded-1"
                                            type="submit">저장 </button>
                                    </div> -->
                                </div>
                            </div>   

                        </div>
                    </div> 
                </div>          
                <!--------------------------------------------------------------------------------------->   

                <!--  모달 처리 -->
                <input class="form-control form-control-sm"  type="hidden" id="inotqtybtn" data-bs-toggle="modal" data-bs-target="#wotqtymodal"  /> 
                <!--------------------------------------------------------------------------------------->    
                <div class="modal fade" id="wotqtymodal" data-bs-keyboard="false"
                    data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm05"
                        style="max-width: 850px">
                        <div class="modal-content border-0">
                            <div class="modal-body p-0" > 
                                <div class="rounded-top-lg py-3 ps-4 pe-6 bg-light">
                                    <h4 class="mb-1" id="modalExampleDemoLabel"> 생산량등록</h4>
                                </div>     
                                <div  class="container-fluid"> 
                                    <div class="col-auto">
                                            <!-- <p> 현재 <b><span id="checked-count">0</span></b> 명이 선택되었습니다. </p> -->
                                        <div class="input-group">
                                            <div class="input-group-text">작업일자</div>
                                            <input type="text"  class="form-control datetimepicker" id="popwkotDate" autocomplete="off" placeholder="Y-m-d" >
                                            <div class="input-group-text">생산량</div>
                                            <input class="form-control form-control-sm"  type="number" id="popwotqt"  placeholder=""      />
                                            <!-- <div class="input-group-text">불량수량</div> -->
                                            <input class="form-control form-control-sm"  type="hidden" id="popwbdqt"  placeholder=""      /> 
                                            <button class="btn btn-falcon-warning me-1 mb-1" type="button" onclick="save_fnc()">등록
                                            </button> 
                                            <button class="btn btn-falcon-warning me-1 mb-1" type="button" id="popsearch01" >조회
                                            </button> 
                                            <button class="btn btn-falcon-danger me-1 mb-1" type="button" id="popsearch02" onclick="woworkDel()">삭제
                                            </button> 
                                            <input class="form-control form-control-sm" id="popseq" type="hidden"  /> 
                                            <input class="form-control form-control-sm" id="popwseq" type="hidden"  />  
                                        </div> 
                                    </div> 
                                </div>  
                                <div class="container-fluid"> 
                                    <div id="wotqtGrid_div" ></div>
                                    <div id="thePager06"></div>
                                </div>    
                            </div>  
                            <div class="modal-footer">
                                <div class="row g-1">
                                    <div class="col-auto">
                                        <button class="badge-soft-primary dropdown-item rounded-1"  id="wotqtymodal_btn"
                                            type="button" data-bs-dismiss="modal">Close</button>
                                    </div>
                                    <!-- <div class="col-auto">
                                        <button class="badge-soft-info dropdown-item rounded-1"
                                            type="submit">저장 </button>
                                    </div> -->
                                </div>
                            </div>   

                        </div>
                    </div> 
                </div>          
            <!--------------------------------------------------------------------------------------->  
            
            
            <!--  모달 처리 -->
            <input class="form-control form-control-sm"  type="hidden" id="intimebtn" data-bs-toggle="modal" data-bs-target="#timemodal"  /> 
            <!--------------------------------------------------------------------------------------->   
            <div class="modal fade" id="timemodal" data-bs-keyboard="false"
                    data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
                    aria-hidden="true">
                <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm01"
                    style="max-width: 600px">
                    <div class="modal-content border-0">
                        <div class="modal-body p-0" > 
                            <div class="rounded-top-lg py-3 ps-4 pe-6 bg-light">
                                <h4 class="mb-1" id="modalExampleDemoLabel">작업시간선택</h4>
                            </div>    
                            <div class="rounded-top-lg py-3 ps-4 pe-6 bg-light"> 
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" name="rwflag" id="rwflag" type="radio"  value="D" checked />
                                    <label class="form-check-label" for="inlineRadio1">주간</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" name="rwflag" id="rwflag" type="radio" value="N" />
                                    <label class="form-check-label" for="inlineRadio1">야간</label>
                                </div>                          
                            </div>    
                        </div>  

                        <div class="modal-footer">
                            <div class="row g-1">
                                <div class="col-auto">
                                    <button class="badge-soft-info dropdown-item rounded-1" id="rwflagBtn" 
                                        type="submit">작업시작</button>
                                </div>
                                <div class="col-auto">
                                    <button class="badge-soft-primary dropdown-item rounded-1"
                                        type="button"  id="wintimemodal_btn" data-bs-dismiss="modal">Close</button>
                                </div> 
                            </div>
                        </div>   

                    </div>
                </div> 
            </div>    
            <!--------------------------------------------------------------------------------------->   

            </div>
        </div>
    </div>  

</div>    
 

<!--------------------------------------------------------------------------------------->     

<script  type="text/javascript" th:inline="javascript"> 
    var wperidGrid_Data ;
    var wperidGrid ;
    var wiworkGrid ; 
    var wtab01Grid; 
    var wtabsaGrid;
    var wjglistGrid; 
    var wbadGrid ;
    var wstopGrid ;
    var wbomGrid ;
    var theBarGrid;
    var view_flistpage;
    var view_salistpage;
    var view_wotqtpage;
    var view_wrmcpage ;
    var view_wbadpage ;
    var view_wstoppage ;
    var view_wjglistpage;
    var wkotdate;
    var button_workstBtn = document.getElementById('workstBtn');
    var button_workedBtn = document.getElementById('workedBtn');
    var button_wfrdt = document.getElementById('wfrdt');
    var button_wtrdt = document.getElementById('wtrdt');
    var button_wrmcBtn = document.getElementById('wrmcBtn');
    var button_wperidBtn = document.getElementById('wperidBtn');
    var button_wotqtyBtn = document.getElementById('wotqtyBtn');
    var button_wbadqtyBtn = document.getElementById('wbadqtyBtn');
    var button_worksaveBtn = document.getElementById('worksaveBtn');
    var button_partbtn = document.getElementById('partbtn');
      
    var btnstep01 = document.getElementById('btnstep01');
    var btnstep02 = document.getElementById('btnstep02');
    var btnstep03 = document.getElementById('btnstep03');
    var btnstep04 = document.getElementById('btnstep04'); 

    const statusdis_div = document.getElementById('statusdis01'); 
    let barcode ;
    function barcode_enter(e){ 
           if(e.keyCode == 13){
            var ls_searchOrdDate = document.getElementById('searchOrdDate').value;  
            searchList_rtn(ls_searchOrdDate);
              return ;
           }
    }

    window.onload = function() {  
        //작업지시 list
        var ll_bomchkrow = 0;
        view_flistpage = new wijmo.collections.CollectionView(getData_flist(), {
            // pageSize: 8
        });  
        wtab01Grid = new wijmo.grid.FlexGrid('#theGrid_div', {
            autoGenerateColumns: false,
            isReadOnly: true, 
            selectionMode: 'RowRange',
            alternatingRowStep: 0,
            columns: [
                // { binding: 'index', header: 'seq', width: '*' },
                { binding: 'wrmcnm', header: '호기',  width: 130, align:"center" },
                { binding: 'prod_sdate', header: '일자',  width: 130, align:"center", format: 'yyyy-MM-dd' },
                // { binding: 'lotno', header: 'LOTNO',  width: 130, align:"center", format: 'yyyy-MM-dd' },
                {
                    binding: 'pname',
                    width: 150,
                    header: '품목명', 
                    align:"center",
                    cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.pname}</b>',
                        click: (e, ctx) => {                            
                            selectChk(ctx.item.custcd, ctx.item.spjangcd, ctx.item.wono, ctx.item.cltnm, ctx.item.pname, ctx.item.ostore, ctx.item.plan_no, ctx.item.cltcd, ctx.item.pcode, ctx.item.wseq, ctx.item.wflag, ctx.item.phmmdoc, ctx.item.otqty, ctx.item.wrpsnm, ctx.item.owqty ,ctx.item.obqty,ctx.item.winps,ctx.item.wrps,ctx.item.lotno,ctx.item.prod_qty, ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode , ctx.item.partnm, ctx.item.wbgubn, ctx.item.end_qty,  ctx.item.jgumtype,  ctx.item.jgumnm, ctx.item.jchajong, ctx.item.jpumcode);
                        }
                    })
                }, 
                
                // { binding: 'cltnm', header: '거래처',   align:"center",  width: 100 },
                // { binding: 'pname', header: '품목명',   align:"center",  width: 150 }, /
                { binding: 'psize', header: '규격',     align:"center",  width: 100 },
                { binding: 'jgumnm', header: '금형',     align:"left",  width: 150 },
                // { binding: 'psize', header: '차종',     align:"center",  width: 100 },
                { binding: 'prod_qty', header: '계획량',align:"center",  width: 100 },
                { binding: 'end_qty', header: '생산량',   align:"center",width: 100 } ,
                // { binding: 'plan_no', header: '작지번호',   align:"center", width: 150  },
                // { binding: 'winqt', header: '투입량',   align:"center",width: '*' }, 
                // { binding: 'wotqt', header: '완료량',   align:"center",width: '*' } ,
                // { binding: 'decision', header: '임시여부', align:"center", width: '*' }

            ],
            itemsSource: view_flistpage
        }); 
        
        setHeaderColumn01(false); 
        function setHeaderColumn01(headerOn) {
            wtab01Grid.headersVisibility = headerOn
            ? wijmo.grid.HeadersVisibility.All
            : wijmo.grid.HeadersVisibility.Column; 
        }

            //작업지시서 데이타 
        function getData_flist(){
            var data = [];
            var cnt = 1;  
            var ListDto = [[${itemDtoList}]];  
            if (!ListDto) {
                for (var i = 0; i < 10; i++) {
                    data.push({
                        id: i, 
                        index: cnt, 
                    })
                    cnt++;
                }
                return data   
            }
            // var today = new Date()
            // console.log("today->" + today);
            for (var i = 0; i < ListDto.length; i++) {
                var psdate = ListDto[i]["prod_sdate"];
                psdate = psdate.substr(0,4) + '-' + psdate.substr(4,2)+ '-' + psdate.substr(6,2);
                var date_format = new Date(psdate);
                data.push({
                    id: i, 
                    index: cnt,                                                                
                    prod_sdate: wijmo.DateTime.addDays(date_format, 0),
                    wono: ListDto[i]["wono"], 
                    cltnm: ListDto[i]["cltnm"], 
                    pname: ListDto[i]["pname"], 
                    psize: ListDto[i]["psize"], 
                    prod_qty: ListDto[i]["prod_qty"],
                    winqt: ListDto[i]["winqt"] , 
                    owqty: ListDto[i]["owqty"] ,  
                    otqty: ListDto[i]["otqty"] ,     
                    decision: ListDto[i]["decision"] ,    
                    plan_no: ListDto[i]["plan_no"] ,
                    ostore: ListDto[i]["ostore"] ,
                    custcd: ListDto[i]["custcd"] ,
                    spjangcd: ListDto[i]["spjangcd"] ,
                    cltcd: ListDto[i]["cltcd"] ,
                    wseq: ListDto[i]["wseq"]  ,
                    pcode: ListDto[i]["pcode"] ,
                    jpumcode: ListDto[i]["jpumcode"] ,
                    wflag: ListDto[i]["wflag"] ,
                    wremark: ListDto[i]["wremark"] ,
                    phmmdoc: ListDto[i]["phmmdoc"]  ,
                    winps: ListDto[i]["winps"]  ,
                    wrps: ListDto[i]["wrps"]  ,
                    lotno: ListDto[i]["lotno"]  ,
                    wrpsnm: ListDto[i]["wrpsnm"],
                    obqty: ListDto[i]["obqty"],
                    end_qty: ListDto[i]["end_qty"],
                    wrmc: ListDto[i]["wrmc"],
                    wrmcnm: ListDto[i]["wrmcnm"],
                    partcode: ListDto[i]["partcode"],
                    partnm: ListDto[i]["partnm"],
                    wbgubn: ListDto[i]["w_b_gubn"] ,
                    jgumtype: ListDto[i]["jgumtype"],
                    jgumnm: ListDto[i]["jgumnm"] ,
                    jchajong: ListDto[i]["jchajong"]                     
                    
                });
                cnt++;
            }    
            return data                                          
        }             
        //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$

        view_salistpage = new wijmo.collections.CollectionView(getData_flist02(), {
            // pageSize: 8
        });   
        wtabsaGrid = new wijmo.grid.FlexGrid('#theGridSA_div', {
            autoGenerateColumns: false,
            isReadOnly: true, 
            selectionMode: 'RowRange',
            alternatingRowStep: 0,
            columns: [
                { binding: 'wrmcnm', header: '호기', width: 100 },
                { binding: 'prod_sdate', header: '일자',  width: 130, align:"center", format: 'yyyy-MM-dd' }, 
                // { binding: 'plan_no', header: '작지번호',  width: 130, align:"center",  },
                {
                    binding: 'lotno',
                    width: 150,
                    header: 'LOTNO', 
                    align:"center",
                    cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.lotno}</b>',
                        click: (e, ctx) => {
                            selectChk_02(ctx.item.custcd, ctx.item.spjangcd, ctx.item.wono, ctx.item.cltnm, ctx.item.pname, ctx.item.ostore, ctx.item.plan_no, ctx.item.cltcd, ctx.item.pcode, ctx.item.wseq, ctx.item.wflag, ctx.item.phmmdoc, ctx.item.otqty, ctx.item.wrpsnm, ctx.item.owqty ,ctx.item.obqty,ctx.item.winps,ctx.item.wrps,ctx.item.lotno,ctx.item.prod_qty, ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode, ctx.item.partnm, ctx.item.wbgubn, ctx.item.jgumtype , ctx.item.jgumnm , ctx.item.subpartcode, ctx.item.subpartnm, ctx.item.jchajong , ctx.item.jpumcode  );
                        }
                    })
                }, 
                // { binding: 'plan_no', header: '작지번호',   align:"center", width: 150  },
                // { binding: 'cltnm', header: '거래처',   align:"center",  width: 100 },
                {
                    binding: 'pname',
                    width: 150,
                    header: '품목명', 
                    align:"center",
                    cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.pname}</b>',
                        click: (e, ctx) => {
                            selectChk_02(ctx.item.custcd, ctx.item.spjangcd, ctx.item.wono, ctx.item.cltnm, ctx.item.pname, ctx.item.ostore, ctx.item.plan_no, ctx.item.cltcd, ctx.item.pcode, ctx.item.wseq, ctx.item.wflag, ctx.item.phmmdoc, ctx.item.otqty, ctx.item.wrpsnm, ctx.item.owqty ,ctx.item.obqty,ctx.item.winps,ctx.item.wrps,ctx.item.lotno,ctx.item.prod_qty, ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode, ctx.item.partnm, ctx.item.wbgubn, ctx.item.jgumtype , ctx.item.jgumnm , ctx.item.subpartcode, ctx.item.subpartnm, ctx.item.jchajong , ctx.item.jpumcode  );
                        }
                    })
                },  
                { binding: 'psize', header: '규격',     align:"center",  width: 100 },
                { binding: 'jchajong', header: '차종',     align:"center",  width: 100 },
                { binding: 'prod_qty', header: '계획량',align:"center",  width: 100 },
                { binding: 'end_qty', header: '생산량',   align:"center",width: 100 } ,
                // { binding: 'winqt', header: '투입량',   align:"center",width: '*' }, 
                // { binding: 'wotqt', header: '완료량',   align:"center",width: '*' } ,
                // { binding: 'decision', header: '상태', align:"center", width: '*' }

            ],
            itemsSource: view_salistpage
        }); 
        
        setHeaderColumn08(false); 
        function setHeaderColumn08(headerOn) {
            wtabsaGrid.headersVisibility = headerOn
            ? wijmo.grid.HeadersVisibility.All
            : wijmo.grid.HeadersVisibility.Column; 
        }

            //사출리스트 데이타 
        function getData_flist02(){ 
            var data = [];
            var cnt = 1;
            var ListDto = [[${itemSachulDtoList}]];
            if (!ListDto) {
                console.log("empty")
                for (var i = 0; i < 10; i++) {
                    data.push({
                        id: i, 
                        index: cnt 
                    })
                    cnt++;
                }
                return data   
            } 
            // var today = new Date()
            // console.log("today->" + today);
            for (var i = 0; i < ListDto.length; i++) {
                var psdate = ListDto[i]["prod_sdate"];
                psdate = psdate.substr(0,4) + '-' + psdate.substr(4,2)+ '-' + psdate.substr(6,2);
                var date_format = new Date(psdate); 
                var ls_decision =  ListDto[i]["decision"];  
                if(ls_decision == "3"){
                    ls_decision = "작업완료";
                }else{
                    ls_decision = "진행중";
                }
                data.push({
                    id: i, 
                    index: cnt,                                                                
                    prod_sdate: wijmo.DateTime.addDays(date_format, 0),
                    wono: ListDto[i]["wono"], 
                    cltnm: ListDto[i]["cltnm"], 
                    pname: ListDto[i]["pname"], 
                    psize: ListDto[i]["psize"], 
                    prod_qty: ListDto[i]["prod_qty"],
                    winqt: ListDto[i]["winqt"] , 
                    owqty: ListDto[i]["owqty"] ,  
                    otqty: ListDto[i]["otqty"] ,     
                    decision: ls_decision ,    
                    plan_no: ListDto[i]["plan_no"] ,
                    ostore: ListDto[i]["ostore"] ,
                    custcd: ListDto[i]["custcd"] ,
                    spjangcd: ListDto[i]["spjangcd"] ,
                    cltcd: ListDto[i]["cltcd"] ,
                    wseq: ListDto[i]["wseq"]  ,
                    pcode: ListDto[i]["pcode"] ,
                    jpumcode: ListDto[i]["jpumcode"] , 
                    wflag: ListDto[i]["wflag"] ,
                    wremark: ListDto[i]["wremark"] ,
                    phmmdoc: ListDto[i]["phmmdoc"]  ,
                    winps: ListDto[i]["winps"]  ,
                    wrps: ListDto[i]["wrps"]  ,
                    lotno: ListDto[i]["lotno"]  ,
                    wrpsnm: ListDto[i]["wrpsnm"],
                    obqty: ListDto[i]["obqty"],
                    end_qty: ListDto[i]["end_qty"],
                    wrmc: ListDto[i]["wrmc"],
                    wrmcnm: ListDto[i]["wrmcnm"],
                    partcode: ListDto[i]["partcode"],
                    partnm: ListDto[i]["partnm"],
                    subpartcode: ListDto[i]["subpartcode"],
                    subpartnm: ListDto[i]["subpartnm"],
                    wbgubn: ListDto[i]["w_b_gubn"]  ,
                    jgumtype: ListDto[i]["jgumtype"],
                    jgumnm: ListDto[i]["jgumnm"] ,
                    jchajong: ListDto[i]["jchajong"] 
                    
                });
                cnt++;
            }    
            return data                                          
        }             
       

        //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
        //작업설비 popup list
        view_wrmcpage = new wijmo.collections.CollectionView(getData_wrmc(), {
            ///pageSize: 6
        });  
        wrmcGrid = new wijmo.grid.FlexGrid('#wrmcGrid_div', {  
        autoGenerateColumns: false,
        isReadOnly: true, 
        selectionMode: 'RowRange',
        alternatingRowStep: 0,
        columns: [   

            { binding: 'wrmc',
                header: '코드', 
                align:"center",
                cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                    text: '<b>${item.wrmc}</b>',
                    click: (e, ctx) => {
                        wrmcChk(ctx.item.wrmc, ctx.item.wrmcnm);
                    }
                }),  
            }, 
            {
                binding: 'wrmcnm',
                header: '설비명', 
                align:"center",
                cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                    text: '<b>${item.wrmcnm}</b>',
                    click: (e, ctx) => {
                        wrmcChk(ctx.item.wrmc, ctx.item.wrmcnm);
                    }
                })
            },

            { binding: 'wpernm', header: '작업자', width: '*', format: 'n1' } 

        ], 
             itemsSource: view_wrmcpage
        });  
        // 작업설비 데이터 수집
        function getData_wrmc(){

            var WrmcDto = [[${wrmcDto}]];  
            var data02 = []; 
            var cnt = 1;
            for (var i = 0; i < WrmcDto.length; i++) {
                data02.push({
                    id: i, 
                    index: cnt,
                    wrmc:WrmcDto[i]["wrmc"],
                    wrmcnm: WrmcDto[i]["wrmcnm"], 
                    wpernm: WrmcDto[i]["wpernm"]                                                    
                });
                cnt++;
            }    
            return data02                                          
        }     
        setHeaderColumn02(false); 
        function setHeaderColumn02(headerOn) {
            wrmcGrid.headersVisibility = headerOn
            ? wijmo.grid.HeadersVisibility.All
            : wijmo.grid.HeadersVisibility.Column; 
        }
        //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
        //생산량등록 popup list
        view_wotqtpage = new wijmo.collections.CollectionView(getData_wlist(), {
            // pageSize: 6
        });
        // 생산량등록 페이지 이동
        // new wijmo.input.CollectionViewNavigator('#thePager06', {
        //     byPage: true,
        //     headerFormat: 'Page {currentPage:n0} of {pageCount:n0}',
        //     cv: view_wotqtpage
        // });     
        wotqtGrid = new wijmo.grid.FlexGrid('#wotqtGrid_div', {  
            autoGenerateColumns: false,
            isReadOnly: true, 
            selectionMode: 'RowRange',
            alternatingRowStep: 0,
            columns: [   

                { binding: 'pcode', header: '품목코드', width: '*'  } ,
                { binding: 'pname', header: '품명', width: '*' } ,
                { binding: 'psize', header: '규격', width: '*' } ,
                { binding: 'wotdt',
                    header: '생산일자', 
                    cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.wotdt}</b>',
                        click: (e, ctx) => {
                            woworkDel(ctx.item.plan_no, ctx.item.wseq, ctx.item.seq, ctx.item.pcode, ctx.item.lotno);
                        }
                    }),  
                }, 
                {
                    binding: 'wqty',
                    header: '생산량', 
                    align:"center",
                    cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.wqty}</b>',
                        click: (e, ctx) => {
                            woworkDel(ctx.item.plan_no, ctx.item.wseq, ctx.item.seq, ctx.item.pcode, ctx.item.lotno);
                        }
                    })
                },

                // { binding: 'bqty', header: '불량', width: '*', format: 'n1' } ,
                { binding: 'qty', header: '제품량', width: '*', format: 'n1' } 

            ], 
            itemsSource: view_wotqtpage
        });  
        // 작업설비 데이터 수집
        function getData_wlist(){

            var WrmcDto = [[${wrmcDto}]];  
            var data02 = [];
            var cnt = 1;
            // for (var i = 0; i < 10; i++) {
            //     data02.push({
            //         id: i, 
            //         index: cnt,
            //         pcode:WrmcDto[i]["pcode"],
            //         pname: WrmcDto[i]["pname"], 
            //         pgugek: WrmcDto[i]["pgugek"],
            //         wotdt: WrmcDto[i]["wotdt"],
            //         wqty: WrmcDto[i]["wqty"],
            //         bqty: WrmcDto[i]["bqty"],
            //         qty: WrmcDto[i]["qty"],
            //     });
            //     cnt++;
            // }  
            return data02                                          
        }    


        setHeaderColumn03(false); 
        function setHeaderColumn03(headerOn) {
            wotqtGrid.headersVisibility = headerOn
            ? wijmo.grid.HeadersVisibility.All
            : wijmo.grid.HeadersVisibility.Column; 
        }
        //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
        //작업자 popup list 
        let view_wperidpage = new wijmo.collections.CollectionView(getData_wperid()); 
        // setGroups(true);
            wperidGrid = new wijmo.grid.FlexGrid('#wperidGrid_div', {
            deferResizing: true,
            showMarquee: true, 
            alternatingRowStep: 0,
            autoGenerateColumns: false, 
            columns: [   
                // { binding: 'custcd',width: '*', header: 'custcd', width: '*', align:"center", format: '*' }, 
                // { binding: 'spjangcd',width: '*', header: 'spjangcd', width: '*', align:"center", format: '*' }, 
                // { binding: 'linenm',width: '*', header: '라인', width: '*', align:"center", format: '*' ,
                //     cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                //         text: '<b>${item.linenm}</b>',
                //         click: (e, ctx) => {
                //             wperidChk(ctx.item.wperid, ctx.item.wpernm );
                //         }
                //     })
                // }, 
                // { binding: 'wflagnm', width: '1*', header: '공정', width: '*', align:"center", format: '*' ,
                //     cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                //         text: '<b>${item.wflagnm}</b>',
                //         click: (e, ctx) => {
                //             wperidChk(ctx.item.wperid, ctx.item.wpernm );
                //         }
                //     })
                //     }, 
                { binding: 'wperid', width: 100, header: '코드', width: '*', align:"center", format: '*' ,
                    cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.wperid}</b>',
                        click: (e, ctx) => {
                            wperidChk(ctx.item.wperid, ctx.item.wpernm );
                        }
                    })
                }, 
                {
                    binding: 'wpernm',
                    width: 200,
                    header: '작업자', 
                    align:"center",
                    cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.wpernm}</b>',
                        click: (e, ctx) => {
                            wperidChk(ctx.item.wperid, ctx.item.wpernm );
                        }
                    })
                } 

            ], 
            itemsSource: view_wperidpage
        });  
         
        // 헤더 열 전환
        setHeaderColumn(false);
        // document.getElementById('header').addEventListener('click', e => {
        //     setHeaderColumn(e.target.checked);
        // });
        function setHeaderColumn(headerOn) {
            wperidGrid.headersVisibility = headerOn
            ? wijmo.grid.HeadersVisibility.All
            : wijmo.grid.HeadersVisibility.Column;
            // selector.column = headerOn
            // ? wperidGrid.rowHeaders.columns[0]
            // : wperidGrid.columns[0];
        }
        // 체크된 항목 표시
        // showCheckedCount();
        function showCheckedCount() {
            // let cnt = document.getElementById('checked-count'), sel = wperidGrid.rows.filter(r => r.isSelected);                                        
            // console.log("sel", sel) ;
            var custcd = new Array();
            var spjangcd = new Array();
            var linecd = new Array();
            var linenm = new Array();
            var wflagcd = new Array();
            var wflagnm = new Array();
            var wperid = new Array();
            var wpernm = new Array();
            // e._p._rows[i]._data.qty
            for (var i = 0; i < sel.length; i++) {
                custcd [i]   = sel[i]._data.custcd;
                spjangcd[i] = sel[i]._data.spjangcd;
                linecd[i]   = sel[i]._data.linecd;
                linenm[i]   = sel[i]._data.linenm;
                wflagcd[i]  = sel[i]._data.wflagcd;
                wflagnm[i]  = sel[i]._data.wflagnm;
                wperid[i]   = sel[i]._data.wperid;
                wpernm [i]  = sel[i]._data.wpernm; 
                // console.log('sel[i]._data.wflagcd', sel[i]._data.wflagcd);
            }  
            plan_no =  document.getElementById('inplan_no').value;
            var ls_inlotno =  document.getElementById('inlotno').value;
            if(sel.length > 0){
                if(sel.length == 1){
                    document.getElementById('inwrpsnm').value = wpernm [0];
                }else{                                                
                    document.getElementById('inwrpsnm').value = wpernm [0] + ' 외 '; // + sel.length - 1  + '명';
                } 
                document.getElementById('inwrps').value = wperid [0]; 
            }
            
            if(!plan_no && sel.length > 0 ){
                alert("작지번호를 선택하세요");
                return 
            }
            // console.log("wpernm", wpernm);
            // console.log("plan_no", plan_no);
            if(!plan_no ){
                return 
            }

            $.ajax({
                url: '/input/w010perid',  
                type:"post",
                data: {"custcd" : custcd,
                        "spjangcd": spjangcd,
                        "linecd" : linecd,
                        "linenm" : linenm,
                        "wflagcd" : wflagcd,
                        "wflagnm" : wflagnm,
                        "wperid" : wperid,
                        "wpernm" : wpernm,
                        "plan_no" : plan_no,
                        "lotno" : ls_inlotno
                        },
                contentType: "application/x-www-form-urlencoded; charset=UTF-8;",
                success:function(data){
                    var result  = data;   
                    // console.log("result", result);
                },error:function(e){
                    alert(data.code);
                    alert(data.message);
                }
            }).done(function(fragment){           

            }) 



            //투입인원        
            cnt.textContent = sel.length.toString();
            document.getElementById('inwinps').value = parseInt(sel.length.toString()); 
        }
        
        //지정된 레벨까지 collapse  특정 그룹에 대해서만 expand 
        wperidGrid.collapseGroupsToLevel(1);
        var count = 0;
        for (var j =0; j <  wperidGrid.rows.length - 1; j++) {
            if (wperidGrid.rows[j].hasChildren) { // 자식 행이 있는 경우 
                // console.log(wperidGrid.rows[j].dataItem.name); 
                if(wperidGrid.rows[j].level=== 1  ){ //계층 수준이 1이고 computer이면
                    wperidGrid.rows[j].isCollapsed = false;
                } 
            }
        }

        // 작업자 데이터 수집
        function getData_wperid(){

            var WperidDto = [[${wperidDto}]];  
            var data03 = [];
            var cnt = 1;
            for (var i = 0; i < WperidDto.length; i++) {
                data03.push({
                    id: i, 
                    index: cnt,
                    custcd:WperidDto[i]["custcd"], 
                    spjangcd:WperidDto[i]["spjangcd"], 
                    linenm:WperidDto[i]["linenm"], 
                    linecd:WperidDto[i]["linecd"], 
                    wflagcd:WperidDto[i]["wflagcd"],
                    wflagnm:WperidDto[i]["wflagnm"], 
                    wperid:WperidDto[i]["wperid"],  
                    wpernm: WperidDto[i]["wpernm"]                                                    
                });
                cnt++;
            }   
            return data03                                          
        } 

        function pickOne(items) {
                return items[randBetween(0, items.length - 1)];
        }
        function randBetween(min, max) {
            return Math.floor(Math.random() * (max - min + 1) + min);
        }
  

        //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
        //불량구분 popup list
        view_wbadpage = new wijmo.collections.CollectionView(getBadData_wlist(), {
            // pageSize: 6
        });
        // // 작업설비 페이지 이동
        // new wijmo.input.CollectionViewNavigator('#thePager02', {
        //     byPage: true,
        //     headerFormat: 'Page {currentPage:n0} of {pageCount:n0}',
        //     cv: view_wbadpage
        // });     
        wbadGrid = new wijmo.grid.FlexGrid('#wbadGrid_div', {  
            autoGenerateColumns: false, 
            selectionMode: 'RowRange',
            alternatingRowStep: 0,
            columns: [    
                { binding: 'wcode', header: '코드', align: 'center', width: 80, format: '*' , isReadOnly: true}, 
                { binding: 'wcdnm', header: '불량구분', width: 150, align: 'left', format: '*', isReadOnly: true },   
                { binding: 'wbqty', header: '불량수량', width: 150, align: 'right', format: 'n1', isReadOnly: true } ,  
                // { binding: 'wseq', header: '순번', width: '*', align: 'center', format: 'n1', isReadOnly: true }  
            ],       

            cellEditEnding: function (s, e) {
                // row : 0  col : 1  => pname
                // s => event
                var col = s.columns[e.col];   
                var jatodata = [];
                var pcode = ''; 
                    if (col.binding == 'wbqty') {
                        var ll_qty = 0;
                        var ll_tqty = 0;
                        var ll_inputqty = s.activeEditor.value;
                        var ll_row = e.row;
                        var ll_wotqt = document.getElementById('inwotqt').value
                        if(!ll_wotqt){ll_wotqt = 0}  //생산량
                        if(ll_wotqt == 0){
                            alert("생산량이 없습니다.")
                            return 
                        } 
                        // console.log('qty',s.activeEditor.value); 
                        var ls_plan_no   = document.getElementById('inplan_no').value;  
                        var ls_inlotno   = document.getElementById('inlotno').value; 
                        var ls_inpcode   = document.getElementById('inpcode').value; 
                        var rows = e._p._rows.length  ;   
                        for (var i = 0; i < rows ; i++) {  
                            if (ll_row == i){
                                ll_qty = parseFloat(ll_inputqty);   //parseFloat(값) 
                                ls_wcode = e._p._rows[i]._data.wcode ;
                                ls_wseq  = e._p._rows[i]._data.wseq ;
                            }else{
                                
                                ll_qty = parseFloat(e._p._rows[i]._data.wbqty);  
                            }  
                                
                            if(!isNaN(ll_qty)){ 
                                ll_tqty = ll_tqty + ll_qty;
                            }  
                        }  
                        // tqty = Number(wbomGrid.getCellData(ll_bomchkrow, 5, false));  
                        if(!ll_tqty){ll_tqty = 0 }; 
                        if (ll_wotqt < ll_tqty){
                            alert("불량수량이 생산수량을 초과합니다.")
                            return
                        }else{  
                            for (var i = 0; i < rows ; i++) {   
                                if (ll_row == i){
                                    ll_qty = parseFloat(ll_inputqty);   //parseFloat(값) 
                                }else{   
                                    ll_qty = parseFloat(e._p._rows[i]._data.wbqty);
                                }
                                ls_wcode = e._p._rows[i]._data.wcode ;
                                ls_wseq  = e._p._rows[i]._data.wseq ; 
                                if(ll_qty > 0){ 
                                    $.ajax({
                                        url: '/input/w010wbad',   
                                        type:"POST", 
                                        data: {
                                            "custcd"    : "KDMES" ,
                                            "spjangcd"  : "ZZ",
                                            "plan_no"      : ls_plan_no ,
                                            "lotno"        : ls_inlotno ,
                                            "wflag" : "00010" ,
                                            "wbqty"   : ll_qty   ,
                                            "wcode"   : ls_wcode,
                                            "wseq"      : "00"      ,
                                            "pcode"     : ls_inpcode      
                                        },
                                        async:false,
                                        success:function(data){
                                            //console.log("등록OK", data);   
                                    
                                    },error:function(e){
                                        console.log('error',e);
                                    }
                                    }).done(function(fragment){           

                                    })  
                                }
                            }  
                            document.getElementById('inwbdqt').value= ll_tqty; 
                            document.getElementById('inwokqt').value = ll_wotqt - ll_tqty       //완료량 
                            // wbadqty_int(ll_tqty, ls_wcode, ls_wseq);   //불량구분 등록
                        }
                        
                    }
            },
            itemsSource: view_wbadpage
        });  
        // 불량구분 데이터 수집
        function getBadData_wlist(){

            var WbadDto = [[${wbadDto}]];  
            var data05 = [];
            var cnt = 1;
            for (var i = 0; i < WbadDto.length; i++) {
                data05.push({
                    id: i, 
                    index: cnt,
                    wcode:WbadDto[i]["wcode"],
                    wcdnm: WbadDto[i]["wcdnm"], 
                    wbqty: WbadDto[i]["wbqty"],
                    wseq : WbadDto[i]["wseq"] ,
                    plan_no : WbadDto[i]["plan_no"]          
                });
                cnt++;
            }   
            return data05                                          
        }         
        
        // 헤더 열 전환
        setHeaderColumn04(false); 
        function setHeaderColumn04(headerOn) {
            wbadGrid.headersVisibility = headerOn
            ? wijmo.grid.HeadersVisibility.All
            : wijmo.grid.HeadersVisibility.Column; 
        }
        //불량구분 등록  


        //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
        //비가동구분 popup list
        view_wstoppage = new wijmo.collections.CollectionView(getStopData_wlist(), {
            // pageSize: 6
        });    
        wstopGrid = new wijmo.grid.FlexGrid('#wstopGrid_div', {  
            autoGenerateColumns: false, 
            selectionMode: 'RowRange',
            alternatingRowStep: 0,
            columns: [    
                { binding: 'wcode', header: '코드', align: 'center', width: '*', format: '*' , isReadOnly: true},  
                { binding: 'wcdnm', width: '1*', header: '비가동사유', width: '*', align:"left", format: '*' ,
                    cellTemplate: wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.wcdnm}</b>',
                        click: (e, ctx) => {
                            wstopChk(ctx.item.wcode, ctx.item.wcdnm );
                        }
                    })
                },  
            ],       
            itemsSource: view_wstoppage
        });  
        // 비가동구분 데이터 수집
        function getStopData_wlist(){

            var WstopDto = [[${wstopDto}]];  
            var data05 = [];
            var cnt = 1;
            for (var i = 0; i < WstopDto.length; i++) {
                data05.push({
                    id: i, 
                    index: cnt,
                    wcode:WstopDto[i]["wcode"],
                    wcdnm: WstopDto[i]["wcdnm"]         
                });
                cnt++;
            }   
            return data05                                          
        }         
        
        // 헤더 열 전환
        setHeaderColumn06(false); 
        function setHeaderColumn06(headerOn) {
            wstopGrid.headersVisibility = headerOn
            ? wijmo.grid.HeadersVisibility.All
            : wijmo.grid.HeadersVisibility.Column; 
        }

        //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
        //원자재 재고 popup list
        view_wjglistpage = new wijmo.collections.CollectionView(getStopData_wlist(), {
            // pageSize: 6
        });    
        wjglistGrid = new wijmo.grid.FlexGrid('#wjglistGrid_div', {  
            autoGenerateColumns: false, 
            selectionMode: 'RowRange',
            alternatingRowStep: 0,
            columns: [    
                { binding: 'pname', header: '품목', align: 'center', width: '*', format: '*' , isReadOnly: true},  
                { binding: 'psize', header: '규격', align: 'center', width: '*', format: '*' , isReadOnly: true},  
                { binding: 'punit', header: '단위', align: 'center', width: '*', format: '*' , isReadOnly: true},  
                { binding: 'janqty', header: '재고', align: 'center', width: '*', format: '*' , isReadOnly: true},  
                { binding: 'wontxt', header: '자재구분', align: 'center', width: '*', format: '*' , isReadOnly: true},  
            ],       
            itemsSource: view_wjglistpage
        });          
        
        // 헤더 열 전환
        setHeaderColumn05(false); 
        function setHeaderColumn05(headerOn) {
            wjglistGrid.headersVisibility = headerOn
            ? wijmo.grid.HeadersVisibility.All
            : wijmo.grid.HeadersVisibility.Column; 
        }
 
        //-------------------------------------------------------------------------------------------------------------------------------------------------

    //불량수량 조회  
    document.getElementById("wbadqtyBtn").addEventListener("click",function(){
            searchbdqty_fnc()
    })    

    function searchbdqty_fnc(){
        var ls_plan_no   = document.getElementById('inplan_no').value; 
        var ls_inlotno   = document.getElementById('inlotno').value;  
        var ls_wflag = '00010'  

        if(ls_plan_no == null || ls_plan_no.length == 0 || ls_plan_no == ""){ 
                alert("작업지시서를 선택 하세요")  
                return ;               
        }     

        $.ajax({
            url: '/popup/wbad',  
            type:"POST",
            data: {
                "plan_no" : ls_plan_no, 
                "lotno" : ls_inlotno, 
                "wflag" : ls_wflag ,
            },
            success:function(data){ 
                var WbadDto = data;  
                var dataBad = [];
                var cnt = 1;
                // console.log('WbadDto')
                // console.log(WbadDto)
                for (var i = 0; i < WbadDto.length; i++) {
                    dataBad.push({
                        id: i, 
                        index: cnt,
                        lotno:WbadDto[i]["lotno"],
                        wcode:WbadDto[i]["wcode"],
                        wcdnm: WbadDto[i]["wcdnm"], 
                        wbqty: WbadDto[i]["wbqty"],
                        wseq : WbadDto[i]["wseq"] ,         
                    });
                    cnt++;
                }             

                wbadGrid.columns.clear();   
                wbadGrid.autoGenerateColumns = false; 
                view_wbadpage.sourceCollection  = dataBad;  
                var cols = new wijmo.grid.Column(); 
                cols.binding = 'wcode';
                cols.header = '코드';
                cols.width = 100;
                cols.align = "center"
                wbadGrid.columns.push(cols);  
                cols = new wijmo.grid.Column(); 
                cols.binding = 'wcdnm';
                cols.header = '불량구분';
                cols.width = 150;
                cols.align = "center", 
                cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                    text: '<b>${item.wcdnm}</b>',
                    click: (e, ctx) => {
                        wbadDel(ctx.item.lotno, ctx.item.wcode, ctx.item.wcdnm, ctx.item.wbqty);
                    }
                }); 
                wbadGrid.columns.push(cols);   
 
                cols = new wijmo.grid.Column(); 
                cols.binding = 'wbqty';
                cols.header = '불량수량';
                cols.align = "right";
                cols.width = 150; 
                wbadGrid.columns.push(cols);    
                // console.log("cols", cols);  
                // cols = new wijmo.grid.Column(); 
                // cols.binding = 'wseq';
                // cols.header = '순번';
                // cols.align = "center"
                // cols.width = 80; 
                // wbadGrid.columns.push(cols);    
            },error:function(e){
                alert(data.code); 
            }
        }).done(function(fragment){           

        }) 
    }

    //원자재 목록 조회 
    document.getElementById("inpartnm").addEventListener("click",function(){ 
        document.getElementById('wonflag').value = '1';  
        searchjgqty_fnc('1')
        document.getElementById("injglistbtn").click();  
    })  
    document.getElementById("partbtn").addEventListener("click",function(){ 
        document.getElementById('wonflag').value = '1';  
        searchjgqty_fnc('1')
        document.getElementById("injglistbtn").click();  
    })  
    //부자재 목록 조회 
    document.getElementById("insubpartnm").addEventListener("click",function(){
        document.getElementById('wonflag').value = '2';   
        searchjgqty_fnc('2')
        document.getElementById("injglistbtn").click();  
    })  
    document.getElementById("subpartbtn").addEventListener("click",function(){ 
        document.getElementById('wonflag').value = '2';  
        searchjgqty_fnc('2')
        document.getElementById("injglistbtn").click();  
    })  
    document.getElementById("jqtySearchBtn").addEventListener("click",function(){ 
        var ls_wonflag = document.getElementById('wonflag').value;  
        searchjgqty_fnc(ls_wonflag) 
    })  
    
    //원자재 조회  
    function searchjgqty_fnc(arg){  
        var ls_plan_no   = document.getElementById('inplan_no').value;  
        var ls_search   = document.getElementById('searchjqty').value;  
        var ls_wflag = '00010'  

        if(ls_plan_no == null || ls_plan_no.length == 0 || ls_plan_no == ""){ 
            alert("작업지시서를 선택 하세요")  
            return ;               
        }  
        if(ls_search == null || ls_search.length == 0 || ls_search == ""){ 
             ls_search = "%";
        }  
        $.ajax({
            url: '/app02m/index15/jglist',  
            type:"POST",
            data: { 
                "searchtxt" :ls_search,  
                "wonflag" :arg,  
            }, 
            async:false,
            success:function(data){  
                jaego_grid(data);
            },error:function(e){
                console.log("error");                            
            }
        }).done(function(fragment){           

        })  

    }    
    //  원재료 재고 목록
    function jaego_grid(data){
        var wtab01Dto  = data;    
        var wtab01_data = [];
        var cnt = 1;
        var ls_wontxt = "";
        //console.log(wtab01Dto)
        for (var i = 0; i < wtab01Dto.length; i++) {
            ls_wontxt = wtab01Dto[i]["wonflag"]; 
            if(ls_wontxt == null || ls_wontxt.length == 0 || ls_wontxt == ""){ 
                ls_wontxt = ""         ;
            }else{
                if(ls_wontxt == "1"){
                    ls_wontxt = "원재료";
                }else{
                    ls_wontxt = "부재료";
                }
            }   
            wtab01_data.push({
                id: i, 
                index: cnt, 
                janqty: wtab01Dto[i]["janqty"],  
                pcode: wtab01Dto[i]["pcode"], 
                pname: wtab01Dto[i]["pname"], 
                psize: wtab01Dto[i]["psize"], 
                punit: wtab01Dto[i]["punit"],  
                wonflag: wtab01Dto[i]["wonflag"],   
                wontxt: ls_wontxt,      
            });
            cnt++;
        }   
         
            wjglistGrid.columns.clear();  
            wjglistGrid.autoGenerateColumns = false; 
            view_wjglistpage.sourceCollection  = wtab01_data; 

            var cols = new wijmo.grid.Column(); 
            cols.binding = 'pname';
            cols.header = '품목';
            cols.align = "center";
            cols.width = 200;
            cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                text: '<b>${item.pname}</b>',
                click: (e, ctx) => {
                    wjglistChk(ctx.item.pcode ,ctx.item.pname);                    
                }
            });
            wjglistGrid.columns.push(cols);  

            cols = new wijmo.grid.Column(); 
            cols.binding = 'psize';
            cols.header = '규격';
            cols.align = "center";
            cols.width = 150;           
            wjglistGrid.columns.push(cols); 

            cols = new wijmo.grid.Column(); 
            cols.binding = 'janqty';
            cols.header = '재고수량';
            cols.align = "right";
            cols.width = 90;                  
            wjglistGrid.columns.push(cols);   

            cols = new wijmo.grid.Column(); 
            cols.binding = 'wontxt';
            cols.header = '자재구분';
            cols.align = "center";
            cols.width = 90;                  
            wjglistGrid.columns.push(cols);  

    }        
                   
 
        //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
        //작업설비 검색   
        document.getElementById("wrmcSearchBtn").addEventListener("click",function(){
            let searchText = '';  
            searchText = document.getElementById('searchCode').value; 
            $.ajax({
                url: '/popup/wrmc',  
                type:"GET",
                data: {
                    "machname" : searchText,
                    "wflag" : '00010'
                },
                success:function(data){
                    var wrmcDto  = data;  
                    var wrmc_data = [];
                    var cnt = 1;
                    //console.log("wrmc_data-->" + wrmc_data)
                    for (var i = 0; i < wrmcDto.length; i++) {
                        wrmc_data.push({
                            id: i, 
                            index: cnt,
                            wrmc:wrmcDto[i]["wrmc"],
                            wrmcnm: wrmcDto[i]["wrmcnm"], 
                            wpernm: wrmcDto[i]["wpernm"]                                                  
                        });
                        cnt++;
                    }   
                    // console.log("wrmc_data",wrmc_data) 
                    wrmcGrid.columns.clear();   
                    wrmcGrid.autoGenerateColumns = false; 
                    view_wrmcpage.sourceCollection  = wrmc_data;
                    var cols = new wijmo.grid.Column(); 
                    cols.binding = 'wrmc';
                    cols.header = '코드';
                    cols.width = '*';
                    cols.align = 'center';
                    cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.wrmc}</b>',
                        click: (e, ctx) => {
                            wrmcChk(ctx.item.wrmc, ctx.item.wrmcnm);
                        }
                    });
                    wrmcGrid.columns.push(cols);    
                    // console.log("cols", cols);  
                    cols = new wijmo.grid.Column(); 
                    cols.binding = 'wrmcnm';
                    cols.header = '설비명';
                    cols.width = '*';
                    cols.align = 'center';
                    cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.wrmcnm}</b>',
                        click: (e, ctx) => {
                            wrmcChk(ctx.item.wrmc, ctx.item.wrmcnm);
                        }
                    });
                    wrmcGrid.columns.push(cols);  
                    cols = new wijmo.grid.Column(); 
                    cols.binding = 'wpernm';
                    cols.header = '작업자';
                    cols.width = '*';
                    cols.align = 'center';
                    wrmcGrid.columns.push(cols);  
                },error:function(e){
                    alert(data.code);
                    alert(data.message);
                }
            }).done(function(fragment){           

            }) 
        })    

   
        //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$                                    
        // TB_FPLAN_WBAD LIST
        function wbadqty_list(arg){
            var wflag = document.getElementById('inwflag').value;
            var ls_custcd   = document.getElementById('incustcd').value; 
            var ls_spjangcd = document.getElementById('inspjangcd').value;  
            var ls_inlotno   = document.getElementById('inlotno').value; 
            if(!wflag){wflag = "00010";}  
            $.ajax({
                url: '/input/SELWBAD',  
                type:"POST",
                data: {
                    "custcd"     : ls_custcd,
                    "spjangcd"   : ls_spjangcd,
                    "plan_no"    : arg,
                    "lotno"    : ls_inlotno,
                    "wflag"      : wflag
                },
                async:true,
                success:function(data){
                    wbadGrid.columns.clear();   
                    wbadGrid.autoGenerateColumns = false;   
                    var colsa = new wijmo.grid.Column(); 
                    //console.log("_SELWBAD data", data);
                    if(!data.length){ 
                        view_wiworkpage.sourceCollection  = data;
                        colsa.binding = 'wcode';
                        colsa.header = '코드';
                        colsa.width = '*';
                        colsa.align = 'center';
                        wbadGrid.columns.push(colsa);  
                        colsa = new wijmo.grid.Column(); 
                        colsa.binding = 'wcdnm';
                        colsa.header = '불량구분';
                        colsa.width = '*';
                        colsa.align = 'center'; 
                        wbadGrid.columns.push(colsa);  
                        colsa = new wijmo.grid.Column(); 
                        colsa.binding = 'wbqty';
                        colsa.header = '불량수량';
                        colsa.width = '*';
                        colsa.align = 'center';
                        wbadGrid.columns.push(colsa);                                                   
                        return 
                    }  
                    var wbadDto  = data;  
                    var wbad_data = []; 
                    var cnt = 0; 
                    for (var i = 0; i < wbadDto.length; i++) {
                        wbad_data.push({
                            id: i, 
                            index: cnt,
                            wcode: wbadDto[i]["wcode"],
                            wcdnm: wbadDto[i]["wcdnm"], 
                            wbqty: wbadDto[i]["wbqty"], 
                        });                             
                        cnt++;                        
                    }   
                        

                    // console.log('wbad_data', wbad_data); 
                    view_wbadpage.sourceCollection  = wbad_data;
                    colsa.binding = 'wcode';
                    colsa.header = '코드';
                    colsa.width = '*';
                    colsa.align = 'center';
                    wbadGrid.columns.push(colsa);  
                    colsa = new wijmo.grid.Column(); 
                    colsa.binding = 'wcdnm';
                    colsa.header = '불량구분';
                    colsa.width = '*';
                    colsa.align = 'center'; 
                    wbadGrid.columns.push(colsa);  
                    colsa = new wijmo.grid.Column(); 
                    colsa.binding = 'wbqty';
                    colsa.header = '불량수량';
                    colsa.width = '*';
                    colsa.align = 'center';
                    wbadGrid.columns.push(colsa);        
                    
                },error:function(e){
                    alert(data.code);
                    alert(data.message);
                }
            }).done(function(fragment){           

            })                                         
        }



        //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
        //LOT 자재 제품코드 GET
        function wsearch_pcode(arg1, arg2, arg3, arg4, arg5){  
            $.ajax({
                url: '/jaego/lothqty',  
                type:"GET",
                data: {
                    "custcd"     : arg1,
                    "spjangcd"   : arg2,
                    "lotno"      : arg3,
                    "ostore"     : arg4,
                    "pcode"      : arg5
                },
                success:function(data){
                    var WlothDto  = data;  
                    var wloth_data = [];
                    var cnt = 1;  
                    for (var i = 0; i < WlothDto.length; i++) {
                        wloth_data.push({
                            id: i, 
                            index: cnt, 
                            store: WlothDto[i]["store"], 
                            storenm: WlothDto[i]["storenm"],
                            pcode: WlothDto[i]["pcode"],
                            pname: WlothDto[i]["pname"],
                            psize: WlothDto[i]["psize"],
                            punit: WlothDto[i]["punit"],
                            lotno: WlothDto[i]["lotno"],
                            weqty: WlothDto[i]["weqty"],
                            wiqty: WlothDto[i]["wiqty"],
                            wjqty: WlothDto[i]["wjqty"],
                        });
                        cnt++;
                    }   

                    // return wloth_data 
                },error:function(e){
                    alert(data.code);
                    alert(data.message);
                }
            }).done(function(fragment){           

            }) 
        }

    //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    //공정시작
    var button_wfrdt = document.getElementById('wfrdt');
    var button_wtrdt = document.getElementById('wtrdt');
    document.getElementById("wfrdt").addEventListener("click",function(){  
            var ls_inwrps   = document.getElementById('inwrps').value; 
            var ls_inwrmc   = document.getElementById('inwrmc').value; 
            var ls_inpartcode   = document.getElementById('inpartcode').value;
            if(ls_inwrps == null || ls_inwrps.length == 0 || ls_inwrps == ""){ 
                alert("작업자를 입력하세요.") 
                document.getElementById("inwrpsnm").focus(); 
                return ;               
            }  
            if(ls_inwrmc == null || ls_inwrmc.length == 0 || ls_inwrmc == ""){ 
                alert("작업설비를 입력하세요.") 
                document.getElementById("inmachname").focus(); 
                return ;               
            }  
            if(ls_inpartcode == null || ls_inpartcode.length == 0 || ls_inpartcode == ""){ 
                alert("투입 원재료를 입력하세요.") 
                document.getElementById("inpartnm").focus(); 
                return ;               
            }  
            btn_progress(true, true, false, false) 
            document.getElementById("intimebtn").click();  
    })
    // document.getElementById("wotqtyBtn").addEventListener("click",function(){  
    //         var ls_startDate   = document.getElementById('startDate').value;  
    //         if(ls_startDate == null || ls_startDate.length == 0 || ls_startDate == ""){ 
    //             alert("작업시작 시간을 입력하세요.") 
    //             document.getElementById("startDate").focus(); 
    //             return ;               
    //         }   
    //         document.getElementById("inotqtybtn").click();  
    // })
    document.getElementById("wbadqtyBtn").addEventListener("click",function(){  
            var ls_startDate   = document.getElementById('startDate').value;  
            // if(ls_startDate == null || ls_startDate.length == 0 || ls_startDate == ""){ 
            //     alert("생산량을 입력하세요.")  
            //     return ;               
            // }   
            document.getElementById("inbadqtybtn").click();  
    })
    document.getElementById("rwflagBtn").addEventListener("click",function(){   
            document.getElementById("wintimemodal_btn").click(); 
            const TIME_ZONE = 3240 * 10000;  
            const d =  new Date();
            const date = new Date(+d + TIME_ZONE).toISOString().split('T')[0];
            const time = d.toTimeString().split(' ')[0];    
            document.getElementById('startDate').value = date + ' ' + time; 
            save_btn("1")
            button_wfrdt.disabled = true;
            button_wtrdt.disabled = false;
            
    })
    
     //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    //작업지시리스트   
    document.getElementById("workstartBtn").addEventListener("click",function(){   
        searchList_rtn("btn01");
        document.getElementById("inworkstartbtn").click();  
    })   
     //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    //사출리스트   
    document.getElementById("workingBtn").addEventListener("click",function(){   
        searchList_rtn("btn02");
        document.getElementById("inworkingbtn").click();  
    })  
     //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    //임시중단 
    document.getElementById("workedBtn").addEventListener("click",function(){  
        btn_progress(true, false, true, false) 
        document.getElementById("instopbtn").click();  
    })   
    //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    //공정종료
    document.getElementById("wtrdt").addEventListener("click",function(){   
            var ls_startDate   = document.getElementById('startDate').value;  
            if(ls_startDate == null || ls_startDate.length == 0 || ls_startDate == ""){ 
                alert("작업시작 시간을 입력하세요.") 
                document.getElementById("startDate").focus(); 
                return ;               
            }    
            const TIME_ZONE = 3240 * 10000;  
            const d =  new Date(); 
            const date = new Date(+d + TIME_ZONE).toISOString().split('T')[0];
            const time = d.toTimeString().split(' ')[0]; 
            document.getElementById('endDate').value = date + ' ' + time;
            save_btn("0")
            button_wfrdt.disabled = true;
            button_wtrdt.disabled = true; 
            btn_progress(false, false, false, true) 
        })


    }  
    //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$

    document.getElementById("searchBtn").addEventListener("click",function(){ 
        // var ls_searchOrdDate = document.getElementById('searchOrdDate').value;  
        searchList_rtn("btn01");
    })   
    document.getElementById("searchBtn02").addEventListener("click",function(){ 
        // var ls_searchOrdDate = document.getElementById('searchOrdDate').value;  
        searchList_rtn("btn02");
    })       
    
    function btn_progress(arg1, arg2, arg3, arg4){ 
        if(arg1){
            btnstep01.className = 'nav-link active';        //작업시작
        }else{
            btnstep01.className = 'nav-link';
        }        
        if(arg2){
            btnstep02.className = 'nav-link active';        //작업중
        }else{
            btnstep02.className = 'nav-link';
        }
        if(arg3){
            btnstep03.className = 'nav-link active';        //임시중단
        }else{
            btnstep03.className = 'nav-link';
        }
        if(arg4){
            btnstep04.className = 'nav-link active';        //작업종료
        }else{
            btnstep04.className = 'nav-link';
        } 
    }
    function fnc_calvalue(obj){                            
        ll_inwotqt =  obj.value;                                    //수정 생산량
        if(!ll_inwotqt){
            ll_inwotqt = 0;
        }
        var ll_inwbdqt   = document.getElementById('inwbdqt').value;   //불량수량
        if(!ll_inwbdqt){
            ll_inwbdqt = 0;
        }
        var ll_inwotqt   = ll_inwotqt - ll_inwbdqt ;
        document.getElementById('inwokqt').value = ll_inwotqt;   //완료량
        
    }
    function save_btn(arg1){ 
        //TB_FPLAN_WORK TB_FPLAN_W010  SAVE    
        if(arg1 == "0"){ 
            const TIME_ZONE = 3240 * 10000;  
            const d =  new Date(); 
            const date = new Date(+d + TIME_ZONE).toISOString().split('T')[0];
            const time = d.toTimeString().split(' ')[0]; 
            document.getElementById('endDate').value = date + ' ' + time;
        } 
        if(arg1 == "1"){ 
            //주야간구분 
            var radios = document.getElementsByName('rwflag');
            for (var i = 0; i < radios.length; i++) {  
                if (radios[i].checked) { 
                    // console.log(radios[i].value); // 체크된 라디오 버튼의 값 출력 
                    ls_rwflag = radios[i].value; 
                }
            }    
        }else{
            ls_rwflag = "";
        }
        
        var ls_custcd   = document.getElementById('incustcd').value; 
        var ls_spjangcd = document.getElementById('inspjangcd').value; 
        var startDate   = document.getElementById('startDate').value; 
        var endDate   = document.getElementById('endDate').value;
        var ls_plan_no   = document.getElementById('inplan_no').value; 
        var ls_inlotno   = document.getElementById('inlotno').value; 
        var ls_inwrmc   = document.getElementById('inwrmc').value;
        var ll_inwinqt  = document.getElementById('prod_qty').value;         //계획
        var ll_inwbdqt  = document.getElementById('inwbdqt').value;         //불량
        var ll_inwotqt = document.getElementById('inwotqt').value;          //생산     
        var ll_inwokqt = document.getElementById('inwokqt').value;          //완료
        var ls_inwflag  = '00010';   
        var ls_inwremark  = document.getElementById('inwremark').value;  
        var ls_inwseq  = document.getElementById('inwseq').value; 
        var ls_inwinps  = document.getElementById('inwinps').value; 
        var ls_inwrps   = document.getElementById('inwrps').value; 
        var ls_inpcode   = document.getElementById('inpcode').value; 
        var ls_inwono   = document.getElementById('inwono').value;  
        var ls_inpartcode  = document.getElementById('inpartcode').value;  
        var ls_inpartnm  = document.getElementById('inpartnm').value;  
        var ls_insubpartcode  = document.getElementById('insubpartcode').value;  
        var ls_insubpartnm  = document.getElementById('insubpartnm').value;  
        var ls_inwbgubn  = document.getElementById('inwbgubn').value;  
        var ls_injgumtype  = document.getElementById('injgumtype').value;  
        var ls_injgumnm  = document.getElementById('injgumnm').value; 
        
        var ls_stopcd = "";
        var ls_stopnm = "";
        button_workstBtn.disabled = false;
        button_workedBtn.disabled = false;
        button_wfrdt.disabled = false;
        button_wtrdt.disabled = false; 
        //button_wrmcBtn.disabled = false;
        button_wperidBtn.disabled = false;
        //button_wotqtyBtn.disabled = false;
        button_wbadqtyBtn.disabled = false; 
        button_worksaveBtn.disabled = false;  
        button_partbtn.disabled = false; 
        if(arg1 == "1"  ){  //공정시작 
            button_workstBtn.disabled = true;
            button_workedBtn.disabled = false;
            button_wfrdt.disabled = true;
            button_wtrdt.disabled = false;               
            endDate = "";
            document.getElementById('instopcd').value = "";     //비가동사유코드
            document.getElementById('instopnm').value = ""; 
            document.getElementById('endDate').value = null;  
            btn_progress(true, true, false, false) 
        }else if(arg1 == "4"){  //재시작  
            button_workstBtn.disabled = true;
            button_workedBtn.disabled = false;
            button_wfrdt.disabled = true;
            button_wtrdt.disabled = false;               
            endDate = "";
            document.getElementById('instopcd').value = "";     //비가동사유코드
            document.getElementById('instopnm').value = ""; 
            document.getElementById('endDate').value = null;  
            btn_progress(true, true, false, false) 
        }else if(arg1 == "0"){  //공정종료   
            if(ls_inlotno == null || ls_inlotno.length == 0 || ls_inlotno == ""){ 
                alert("lotno를 생성 하세요.")  
                return ;               
            }     
            
            button_workstBtn.disabled = true;
            button_workedBtn.disabled = true; 
            button_worksaveBtn.disabled = true;  
            button_partbtn.disabled = true;  
            btn_progress(false, false, false, true) 
        }else if(arg1 == "2"){  //  작업시작 
            button_workstBtn.disabled = true; 
            button_wfrdt.disabled = true;  
            button_wtrdt.disabled = false;    
            document.getElementById('instopcd').value = "";     //비가동사유코드
            document.getElementById('instopnm').value = ""; 
            endDate = "";
            document.getElementById('endDate').value = null;
            btn_progress(true, true, false, false) 
        }else{ // 작업중단 
            button_workedBtn.disabled = true;
            button_wfrdt.disabled = true;  
            ls_stopcd = document.getElementById('instopcd').value;     //비가동사유코드
            ls_stopnm = document.getElementById('instopnm').value;  
            endDate = "";
            document.getElementById('endDate').value = null;
            btn_progress(true, false, true, false) 
        }   
        if(ls_plan_no == null || ls_plan_no.length == 0){
            alert("작업지시서를 다시 선택하세요")
            return 
        }
        if(!ll_inwinqt){
            ll_inwinqt = 0;
        }else{ 
            if(isNaN(ll_inwinqt)){
                ll_inwinqt = 0;
            }else{
                ll_inwinqt = Number(ll_inwinqt);
            } 
        } 
        if(!ll_inwbdqt){
            ll_inwbdqt = 0;
        }else{
            if(isNaN(ll_inwbdqt)){
                ll_inwbdqt = 0;                                                              
            }else{
                ll_inwbdqt = Number(ll_inwbdqt); 
            
            } 
        }
        if(arg1 == "0" ){ 
            if(!ll_inwotqt){
                alert("완료량을 확인하세요.")  
                return ;               
            } 
        }
        if(!ll_inwotqt){
            ll_inwotqt = 0;
        }else{ 
            if(isNaN(ll_inwotqt)){
                ll_inwotqt = 0;
            }else{
                ll_inwotqt = Number(ll_inwotqt);
            } 
        }
        if(!ll_inwokqt){
            ll_inwokqt = 0;
        }else{ 
            if(isNaN(ll_inwokqt)){
                ll_inwokqt = 0;
            }else{
                ll_inwokqt = Number(ll_inwokqt);
            } 
        }
        if (ll_inwinqt > 0 && ll_inwotqt > 0) {
            ll_wsyul = Math.round( ll_inwotqt / ll_inwinqt )
        }else{
            ll_wsyul = 0;
        } 
        if(!ls_inwinps){
            ls_inwinps = 0;
        }else{ 
            if(isNaN(ls_inwinps)){
                ls_inwinps = 0;
            }else{
                ls_inwinps = Number(ls_inwinps);
            } 
        }
        var ls_decision = arg1; 

        if(!endDate)  {endDate = "  "}
        //  공정종료  공정시작  저장 
        if(arg1 == "0" || arg1 == "1" || arg1 == "4"){
            $.ajax({
                url: '/input/w010upd',   
                type:"POST", 
                data: {
                    "custcd"    : ls_custcd ,
                    "spjangcd"  : ls_spjangcd,
                    "wseq"      : ls_inwseq ,
                    "startDate" : startDate ,
                    "endDate"   : endDate   ,
                    "plan_no"   : ls_plan_no,
                    "lotno"     : ls_inlotno,
                    "wrmc"      : ls_inwrmc      ,
                    "winqt"     : ll_inwinqt     ,
                    "wbdqt"     : ll_inwbdqt     ,
                    "wotqt"     : ll_inwotqt     , 
                    "wsyul"     : ll_wsyul       ,
                    "wflag"     : ls_inwflag     ,
                    "wremark"   : ls_inwremark   ,
                    "wrps"      : ls_inwrps     ,
                    "winps"     : ls_inwinps     ,
                    "decision"  : ls_decision    ,
                    "pcode"     : ls_inpcode     ,
                    "wono"      : ls_inwono ,
                    "partcode"      : ls_inpartcode , 
                    "partnm"      : ls_inpartnm ,     
                    "subpartcode"      : ls_insubpartcode , 
                    "subpartnm"      : ls_insubpartnm ,                     
                    "workdv"      : arg1, 
                    "rwflag"      : ls_rwflag, 
                    "wbgubn"      : ls_inwbgubn,  
                    "jgumnm"      : ls_injgumnm,  
                    
                },
                async:false,
                success:function(data){
                    //  console.log("등록OK", data); 
                    // console.log("wperidGrid_Data", wperidGrid.rows.length );  
            
                    if(arg1 == "0"){
                        // alert("완료 처리 되었습니다.");
                        button_workstBtn.disabled = true;
                        button_workedBtn.disabled = true;
                        button_wfrdt.disabled = true;
                        button_wtrdt.disabled = true;   
                        //button_wrmcBtn.disabled = true;
                        button_wperidBtn.disabled = true;
                        //button_wotqtyBtn.disabled = true;
                        button_wbadqtyBtn.disabled = true;  
                        button_partbtn.disabled = true; 
                        btn_progress(false, false, false, true) 
                        var ll_wotqt = Number(data)
                        document.getElementById('inwotqt').value = ll_wotqt;
                        document.getElementById('inwokqt').value = ll_wotqt;
                        // var ls_text = "<div style='color:red'><span class='badge badge-soft-danger'>공정 완료</span></div>"; 
                    }else if(arg1 == "1"){
                        // alert("작업시작 처리 되었습니다.");
                        document.getElementById('inlotno').value = data;
                        button_workstBtn.disabled = true;
                        button_workedBtn.disabled = false;
                        button_wfrdt.disabled = true;
                        button_wtrdt.disabled = false; 
                        //button_wrmcBtn.disabled = false;
                        button_wperidBtn.disabled = false;
                        //button_wotqtyBtn.disabled = false;
                        button_wbadqtyBtn.disabled = false; 
                        button_partbtn.disabled = false; 
                        btn_progress(true, true, false, false) 
                        // var ls_text = "<div style='color:red'><span class='badge badge-soft-info'>공정 진행중</span></div>";     
                    }else if(arg1 == "4"){
                        // alert("재시작 처리 되었습니다.");
                        document.getElementById('inlotno').value = data;
                        button_workstBtn.disabled = true;
                        button_workedBtn.disabled = false;
                        button_wfrdt.disabled = true;
                        button_wtrdt.disabled = false; 
                        //button_wrmcBtn.disabled = false;
                        button_wperidBtn.disabled = false;
                        //button_wotqtyBtn.disabled = false;
                        button_wbadqtyBtn.disabled = false; 
                        button_partbtn.disabled = false; 
                        btn_progress(true, true, false, false) 
                        // var ls_text = "<div style='color:red'><span class='badge badge-soft-info'>공정 진행중</span></div>";      

                    }else{
                        // alert("저장되었습니다.");
                        button_workstBtn.disabled = false;
                        button_workedBtn.disabled = false;
                        button_wfrdt.disabled = true;
                        button_wtrdt.disabled = false; 
                        //button_wrmcBtn.disabled = false;
                        button_wperidBtn.disabled = false;
                        //button_wotqtyBtn.disabled = false;
                        button_wbadqtyBtn.disabled = false;
                        button_partbtn.disabled = false;  
                        btn_progress(true, true, false, false) 
                        // var ls_text = "<div style='color:red'><span class='badge badge-soft-info'>공정 진행중</span></div>";                                        
                    } 
                    //statusdis_div.innerHTML  = ls_text;  
            
            },error:function(e){
                console.log('error',e);
            }
            }).done(function(fragment){           

            })     

        }else{
            // 작업시작 작업중단 
            // console.log("workdv-->" + arg1)
            $.ajax({
                url: '/input/wtimeupd',   
                type:"POST", 
                data: {
                    "custcd"    : ls_custcd ,
                    "spjangcd"  : ls_spjangcd, 
                    "plan_no"   : ls_plan_no, 
                    "lotno"     : ls_inlotno, 
                    "wflag"     : ls_inwflag     , 
                    "decision"  : ls_decision  ,
                    "workdv"      : arg1   ,
                    "instopcd"      : ls_stopcd   ,
                    "instopnm"      : ls_stopnm  
                },
                async:false,
                success:function(data){
                    // console.log("등록OK", data); 
                    // console.log("wperidGrid_Data", wperidGrid.rows.length );   
                    if(arg1 == "2"){
                        // alert("완료 처리 되었습니다.");
                        // var ls_text = "<div style='color:red'><span class='badge badge-soft-danger'>재시작</span></div>";  
                        btn_progress(true, true, false, false)                                        
                    }else{
                        // alert("저장되었습니다.");
                        // var ls_text = "<div style='color:red'><span class='badge badge-soft-info'>임시중단</span></div>";  
                        btn_progress(true, false, true, false)                                                                               
                    } 
                    //statusdis_div.innerHTML  = ls_text; 
            },error:function(e){
                console.log('error',e);
            }
            }).done(function(fragment){           

            })     

        }


    }

    function save_fnc(){
        var ls_custcd   = document.getElementById('incustcd').value; 
        var ls_spjangcd = document.getElementById('inspjangcd').value; 
        var ls_plan_no   = document.getElementById('inplan_no').value; 
        var ls_inlotno   = document.getElementById('inlotno').value; 
        var ls_inpcode   = document.getElementById('inpcode').value; 
        var ls_inwono   = document.getElementById('inwono').value; 
        var ls_popwotqt   = document.getElementById('popwotqt').value; 
        var ls_popwbdqt   = 0 ; //document.getElementById('popwbdqt').value;  
        var ls_popwkotDate     =  convert_date(wkotdate.value);
        // var ls_popwkotDate   = document.getElementById('popwkotDate').value; 
        var ls_popseq   = document.getElementById('popseq').value; 
        var ls_popwseq   = document.getElementById('popwseq').value; 
        var ls_inwinqt   = document.getElementById('prod_qty').value; //계획량
        var ls_inwotqt   = document.getElementById('inwotqt').value; //생산량
        var ls_wflag = '00010' 
        if(!ls_popwotqt){
            ls_popwotqt = 0;
        }else{ 
            if(isNaN(ls_popwotqt)){
                ls_popwotqt = 0;
            }else{
                ls_popwotqt = Number(ls_popwotqt);
            } 
        } 
        if(ls_popwotqt == 0) {
            alert("생산수량을 입력하세요")
            return 
        }
        ls_inwinqt = Number(ls_inwinqt);
        ls_inwotqt = Number(ls_inwotqt); 
        // console.log(ls_inwinqt)
        // console.log(ls_inwotqt)
        // console.log(ls_popwotqt)
        if(ls_inwinqt < ls_inwotqt + ls_popwotqt){ 
            if (!confirm("계획량을 초과했습니다. 등록하시겠습니까?")) {
                return ; 
            }  
        }
        if(!ls_popwbdqt){
            ls_popwbdqt = 0;
        }else{ 
            if(isNaN(ls_popwbdqt)){
                ls_popwbdqt = 0;
            }else{
                ls_popwbdqt = Number(ls_popwbdqt);
            } 
        } 
        $.ajax({
            url: '/input/oworkupd',   
            type:"POST", 
            data: {
                "custcd"        : ls_custcd ,
                "spjangcd"      : ls_spjangcd,
                "inplan_no"     : ls_plan_no ,
                "lotno"         : ls_inlotno, 
                "inpcode"       : ls_inpcode ,
                "inwono"        : ls_inwono   ,
                "popwotqt"      : ls_popwotqt , 
                "popwbdqt"      : ls_popwbdqt , 
                "popwkotDate"   : ls_popwkotDate , 
                "wflag"         : ls_wflag , 
                "wseq"          : ls_popwseq,
                "seq"           : ls_popseq
            },
            async:false,
            success:function(data){
                // console.log("등록OK", data); 
                // console.log("wperidGrid_Data", wperidGrid.rows.length );  
                if(data == "success"){
                    // alert("완료 처리 되었습니다.");
                    searchotqty_fnc();
                }else{
                    alert("저장중 오류발생");
                    return 
                }  
            },error:function(e){
                console.log('error',e);
            }
        }).done(function(fragment){           

        })     


    }    

    function savebad_fnc(){ 
        var ll_popbadqty   = document.getElementById('popbadqty').value; 
        var ls_wcode   = document.getElementById('con_wcode').value; 
        var ls_plan_no   = document.getElementById('inplan_no').value;  
        var ls_inlotno   = document.getElementById('inlotno').value; 
        var ls_inpcode   = document.getElementById('inpcode').value;  
        var ls_custcd   = document.getElementById('incustcd').value; 
        var ls_spjangcd = document.getElementById('inspjangcd').value;   
        var ls_wflag = '00010' 
        if(!ll_popbadqty){
            ll_popbadqty = 0;
        }  
        if(ll_popbadqty == 0) {
            alert("불량수량을 입력하세요")
            return 
        }
        if(ls_wcode == null || ls_wcode.length == 0 || ls_wcode == "" ){ 
            alert("불량구분을 입력하세요")
            return 
        }   
        if(ls_plan_no == null || ls_plan_no.length == 0 || ls_plan_no == "" ){ 
            alert("작업지시서를  입력하세요")
            return 
        }  
        // console.log(ls_inwinqt)
        // console.log(ls_inwotqt)
        // console.log(ls_popwotqt)  
        $.ajax({
            url: '/input/w010wbad',   
            type:"POST", 
            data: {
                "custcd"    : "KDMES" ,
                "spjangcd"  : "ZZ",
                "plan_no"      : ls_plan_no ,
                "lotno"        : ls_inlotno ,
                "wflag" : "00010" ,
                "wbqty"   : ll_popbadqty   ,
                "wcode"   : ls_wcode,
                "wseq"      : "00"      ,
                "pcode"     : ls_inpcode      
            },
            async:false,
            success:function(data){ 
                var ll_sumqty = parseFloat(data);
                document.getElementById('inwbdqt').value= ll_sumqty; 
                searchbadqty_fnc()
                console.log("등록OK", data);   
        
        },error:function(e){
            console.log('error',e);
        }
        }).done(function(fragment){           

        })   


    }    


    function woworkDel(){
        //ctx.item.plan_no, ctx.item.wseq, ctx.item.seq, ctx.item.pcode, ctx.item.lotno
        
        var ls_custcd   = document.getElementById('incustcd').value; 
        var ls_spjangcd = document.getElementById('inspjangcd').value; 
        var ls_plan_no   = document.getElementById('inplan_no').value; 
        var ls_inlotno   = document.getElementById('inlotno').value; 
        var ls_inpcode   = document.getElementById('inpcode').value;  
        var ls_popwotqt   = document.getElementById('popwotqt').value;  
        var ls_popwkotDate     =  convert_date(wkotdate.value);
        // var ls_popwkotDate   = document.getElementById('popwkotDate').value; 
        var ls_popseq   = document.getElementById('popseq').value; 
        var ls_popwseq   = document.getElementById('popwseq').value; 
        var ls_wflag = '00010' 

        if(!ls_popwotqt){
            ls_popwotqt = 0;
        }else{ 
            if(isNaN(ls_popwotqt)){
                ls_popwotqt = 0;
            }else{
                ls_popwotqt = Number(ls_popwotqt);
            } 
        } 
        if(ls_popwotqt == 0) {
            alert("생산수량을 입력하세요")
            return 
        }

        let result = '';
            if (!confirm("삭제하시겠습니까?")) {
                return ; 
            }  
            $.ajax({
                url: '/input/oworkdel',   
                type:"POST", 
                data: {
                    "plan_no"    : ls_plan_no , 
                    "lotno"      : ls_inlotno, 
                    "wseq"    : ls_popwseq,  
                    "seq"    : ls_popseq,  
                    "pcode"    : ls_inpcode ,  
                    "wflag"    : ls_wflag  
                },
                async:false,
                success:function(data){
                    // console.log("등록OK", data); 
                    searchotqty_fnc();
                    
                    $("#wotqtymodal_btn").trigger("click"); 
                    
                },error:function(e){
                    console.log('error',e);
                }
            }).done(function(fragment){           

            })  
    }
    


    function wbadDel(arg1, arg2, arg3, arg4){ 
        //lotno, wcode, wcdnm, wseq , wbqty
        var ls_plan_no   = document.getElementById('inplan_no').value; 
        var ls_wflag = '00010'  
        if(arg4 == 0) {
            alert("불량수량이 없습니다.")
            return 
        } 
        console.log(ls_plan_no)
        console.log(arg1)
        if(!ls_plan_no) {
            alert("작업지시서를 선택하세요.")
            return 
        }  
        let result = '';
        if (!confirm("삭제하시겠습니까?")) {
            return ; 
        }  
        $.ajax({
            url: '/input/wbadlistdel',   
            type:"POST", 
            data: { 
                "lotno"      : arg1, 
                "wcode"      : arg2, 
                "wseq"      : arg4 ,
                "wflag"    : ls_wflag  ,
                "plan_no"    : ls_plan_no  
            },
            async:false,
            success:function(data){
                var ll_sumqty = parseFloat(data);
                document.getElementById('inwbdqt').value= ll_sumqty;  
                // console.log("삭제OK", data); 
                searchbadqty_fnc();
                
                $("#wbadqtymodal_btn").trigger("click"); 
                
            },error:function(e){
                console.log('error',e);
            }
        }).done(function(fragment){           

        })  
    }



    function getCheckboxValue(event)  {
        let result = '';
        if(event.target.checked)  {
            result = event.target.value;  
        }else {
            result = ''; 
        } 
            document.getElementById('delcode').value= result; 
    }  
    let barcodeControl = null;


    function prt_btn(){
        var ls_inlotno   = document.getElementById('inlotno').value;      //lotno
        var ls_inpname   = document.getElementById('inpname').value;      //품명 
        var ls_incltnm   = document.getElementById('incltnm').value; 
        var ls_inwokqt   = document.getElementById('inwokqt').value;  
        var ls_startDate   = document.getElementById('startDate').value; //작업시작일자
        var ls_rwflag   = document.getElementById('rwflag').value;       //주야간구분 
        const ls_char = ls_inlotno.replace(/[^A-Z]/g, '');  //주야간구분  

        if(ls_char == "D"){
            ls_rwflag = "주간"  
        }else{
            ls_rwflag = "야간"  
        }
        var ls_inwrpsnm   = document.getElementById('inwrpsnm').value;   //작업자 
        var ls_inpartnm   = document.getElementById('inpartnm').value;   //원재료   
        var ls_insubpartnm   = document.getElementById('insubpartnm').value;    //부재료
        var ls_injchajong   = document.getElementById('injchajong').value;    //차종
        var ls_inpcode   = document.getElementById('inpcode').value;    //품목코드
        var ls_injpumcode   = document.getElementById('injpumcode').value;    //품목코드
        var ls_inboxno = 1;
        const dateOnly = ls_startDate?.split(' ')[0] ?? ls_startDate; // 시:분:초 제거

        if (!ls_inlotno || !ls_inpname) {
            alert('작업지시서를 선택하세요.');
            return;
        } 
        $.ajax({
            url: '/input/prtcount',   
            type:"POST", 
            data: { 
                "lotno"      : ls_inlotno,  
                "wflag"      : "010",  
            },
            async:false,
            success:function(data){ 
                // console.log(data)
                ls_inboxno = data
            },error:function(e){
                console.log('error',e);
            }
        }).done(function(fragment){           

        })          
        /*
        const text = ls_inlotno;
        // const barcodeImage = document.getElementById('barcodeImage');
        const printArea = document.createElement('div');
        printArea.className = 'print-area';
        const barcodeImage = document.createElement('img');
        barcodeImage.className = 'barcode-image';
        // const printArea = document.getElementById('printArea').cloneNode(true);
        barcodeImage.src = `/input/generate-barcode?text=${encodeURIComponent(text)}`;
        // document.getElementById('printArea').style.display = 'block';
        const details = document.createElement('div');
            details.className = 'details';
            details.innerHTML = `
                <p class="item-name">품명:  ${ls_inpname} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;수량:  ${ls_inwokqt}</p>
                <p class="item-cltnm">업체명: ${ls_incltnm}</p>
                
            `;
            // <p class="item-barcode">LOTNO : ${ls_inlotno}</p>
            // <p class="item-qty">수량:  ${ls_inwokqt}</p>
        printArea.appendChild(barcodeImage);
        printArea.appendChild(details);
        */
       
        // 전체 출력 영역
        const printWrapper = document.createElement('div');
        printWrapper.style.width = '100%';
        printWrapper.style.display = 'flex';
        printWrapper.style.justifyContent = 'center'; // 중앙 정렬
        printWrapper.style.backgroundColor = '#ffffff';

        const text = ls_inlotno; 
        const printArea = document.createElement('div');
        printArea.style.fontFamily = 'Arial, sans-serif';
        printArea.style.fontSize = '13px';
        printArea.style.border = '1px solid black';
        printArea.style.padding = '10px'; 
        printArea.style.backgroundColor = '#ffffff';
        printArea.style.maxWidth = '590px';
        printArea.style.boxSizing = 'border-box';

        // 바코드 이미지 생성
        const barcodeImage = document.createElement('img');
        barcodeImage.className = 'barcode-image';
        barcodeImage.src = `/input/generate-barcode?text=${encodeURIComponent(text)}`;
        barcodeImage.style.display = 'block';
        barcodeImage.style.margin = '10px auto 5px auto';
        barcodeImage.style.width = '250px';
        barcodeImage.style.height = 'auto';

        // 테이블 생성
        const table = document.createElement('table');
        table.style.borderCollapse = 'collapse';
        table.style.width = '100%';
        table.style.textAlign = 'left';
        table.style.margin = '0 auto';
        table.style.fontSize = '14px';
        table.style.tableLayout = 'fixed';
        // 공통 셀 스타일
        const tdStyle = 'border: 0px solid black; padding: 4px; word-break: break-word;';
        const tdStyle02 = 'border: 0px solid black; padding: 4px; fontSize:9px; word-break: break-word;';

        // 각 행 구성
        table.innerHTML = `
            <tr>
                <th style="${tdStyle}">날짜</th>    <td  style="${tdStyle}">${dateOnly}</td>
                <th style="${tdStyle}">차종</th>    <td  style="${tdStyle}">${ls_injchajong}</td>
                <th style="${tdStyle}">주/야</th>   <td  style="${tdStyle}">${ls_rwflag}</td>
            </tr>
            <tr>
                <th style="${tdStyle}">품명</th>      <td  style="${tdStyle}">${ls_inpname}</td>
                <th style="${tdStyle}">작업자</th>    <td  style="${tdStyle}">${ls_inwrpsnm}</td>
                <th style="${tdStyle}">박스순번</th>  <td  style="${tdStyle}">${ls_inboxno}</td>
            </tr>
            <tr>
                <th style="${tdStyle}">제품코드</th>  <td  style="${tdStyle}">${ls_inpcode}</td>
                <th style="${tdStyle}">품번</th>      <td style="${tdStyle}">${ls_injpumcode}</td> 
                <th style="${tdStyle}" >LotNo</th>   <td  style="fontSize:9px;">${ls_inlotno}</td>
                 
            </tr>
            <tr>
                <th style="${tdStyle}" >원재료명</th><td  colspan="2" style="${tdStyle}">${ls_inpartnm}</td>
                <th style="${tdStyle}" >부재료명</th>  <td style="${tdStyle}" colspan="2">${ls_insubpartnm}</td> 
            </tr> 
            <tr>
                <td colspan="6" style="text-align: center;">${barcodeImage.outerHTML}</td>
            </tr> 
        `;

        // 최종 출력 구성
        printArea.appendChild(table);
        document.body.appendChild(printWrapper);




        // var ls_itemName   = document.getElementById('itemName'); 
        // var ls_quantity   = document.getElementById('quantity');         
        // var ls_companyName   = document.getElementById('companyName');
        // document.getElementById('barcode').innerHTML 
        // ls_itemName.innerHTML  = "품명:" + ls_inpname;
        // ls_quantity.innerHTML  = "업체명:" + ls_incltnm;
        // ls_companyName.innerHTML  = "수량:" + ls_inwokqt;
        
        barcodeImage.onload = () => {
            // const barcodeImage = document.getElementById('barcodeImage'); 
            var doc = new wijmo.PrintDocument({
                // title: ls_inlotno,
                copyCss: true // prevent cross-origin issues in jsfiddle 
            }); 
                // const printArea = document.getElementById('printArea').cloneNode(true)
                doc.append(printArea);
                // doc.append(barcodeImage);
                // Print the document
                doc.print(); 
        } ; // Adjust the timeout duration as needed
        
    }
    function prt_btn_wijmo(){
        var ls_inlotno   = document.getElementById('inlotno').value; 
        var ls_inpname   = document.getElementById('inpname').value;  
        if (!ls_inlotno || !ls_inpname) {
            alert('작업지시서를 선택하세요.');
            return;
        }
        // Clear existing barcode content
        // document.getElementById('barcode').innerHTML = '';
        if (barcodeControl) {
                // Update the existing barcode control value
                barcodeControl.value = ls_inlotno;
        } else {
            // Create a new Code128 barcode
            barcodeControl = new wijmo.barcode.common.Code128('#barcode', {
                codeSet: 1,
                value: ls_inlotno,
                autoWidth: false
            });
        } 

        setTimeout(() => {
            var doc = new wijmo.PrintDocument({
                title: ls_inlotno,
                copyCss: true // prevent cross-origin issues in jsfiddle 
            });
            // Get the barcode HTML
            var barcodeElement = document.getElementById('barcode'); 
            if (barcodeElement) {
                var barcodeHtml = barcodeElement.outerHTML; 
 
                doc.append(barcodeHtml);
                // Print the document
                doc.print();
            }else{ 
                 console.error('Barcode element not found.');
            }
        }, 500); // Adjust the timeout duration as needed
    }
    function del_fnc()  {
        let result = '';
        result = document.getElementById('delcode').value;
        // alert(result);
        if (!confirm("삭제하시겠습니까?")) {
            return ; 
            } else { 
                window.location.href = '/appcom01/delete?spcode=' + result; 
        } 
    }       
    function del_btn()  {
            let result = '';
            if (!confirm("삭제하시겠습니까?")) {
                return ; 
            } 
            var ls_plan_no   = document.getElementById('inplan_no').value; 
            var ls_inlotno   = document.getElementById('inlotno').value; 

            if(ls_plan_no == null || ls_plan_no.length == 0 || ls_plan_no == ""){ 
                    alert("삭제할 데이타를 선택하세요") 
                    return ;               
            }     
            $.ajax({
                url: '/input/w010del',   
                type:"POST", 
                data: {
                    "plan_no"    : ls_plan_no,  
                    "lotno"      : ls_inlotno 
                },
                async:false,
                success:function(data){
                    clear_rtn()
                    // console.log("등록OK", data); 
                    
                },error:function(e){
                    console.log('error',e);
                }
            }).done(function(fragment){           

            })  
    }    
    function clear_rtn(){   
         
        // 초기화
        var gridrow = wperidGrid.rows.length; 
        for( i=0; i < gridrow; i++){ 
            wperidGrid.rows[i].isSelected = false;
        } 
        // document.getElementById('inwrmc').value = "";           //설비코드
        // document.getElementById('inmachname').value  = "";     //설비명 
        document.getElementById('inwinqt').value = 0;         //투입량
        document.getElementById('inwotqt').value = 0;         //생산수량
        document.getElementById('inwbdqt').value = 0;         //불량수량
        document.getElementById('inwokqt').value = 0;         //완료량
        document.getElementById('inwremark').value = "";     //비고
        document.getElementById('startDate').value = "";     //
        document.getElementById('endDate').value = "";     //
        document.getElementById('inwrpsnm').value = "";      //
        document.getElementById('inwinps').value = "";      //
        document.getElementById('inwrps').value = "";     //
        
        document.getElementById('instopcd').value = "";     //비가동코드
        document.getElementById('instopnm').value = "";     //비가동명



        document.getElementById('inplan_no').value = ""; 
        document.getElementById('inlotno').value = "";  
        document.getElementById('inpcode').value = "";   
        document.getElementById('inwseq').value= "";  
        document.getElementById('inwono').value = "";  
        document.getElementById('incltnm').value= "";  
        document.getElementById('inpname').value= ""; 
        document.getElementById('inostore').value= ""; 
        document.getElementById('prod_qty').value = 0;    
        document.getElementById('inpartcode').value = ""; 
        document.getElementById('inpartnm').value = "";  
        document.getElementById('insubpartcode').value = ""; 
        document.getElementById('insubpartnm').value = ""; 
        document.getElementById('inwbgubn').value= "";   
        document.getElementById('inwrmc').value = "";            //설비코드
        document.getElementById('inmachname').value = "";       //설비명 
        document.getElementById('injgumtype').value  = "";      //금형코드 
        document.getElementById('injgumnm').value  = "";  

        document.getElementById('inwinqt').value = 0;         //투입량
        document.getElementById('inwotqt').value = 0;         //생산수량
        document.getElementById('inwbdqt').value = 0;         //불량수량
        document.getElementById('inwokqt').value = 0;         //완료량
        document.getElementById('inwremark').value = "";     //비고
        document.getElementById('startDate').value = "";     //
        document.getElementById('endDate').value = "";     //
        document.getElementById('inwrpsnm').value = "";      //
        document.getElementById('inwinps').value = "";      //
        document.getElementById('inwrps').value = "";     //
        
        document.getElementById('instopcd').value = "";     //비가동코드
        document.getElementById('instopnm').value = "";     //비가동명
        button_workstBtn.disabled = false;
        button_workedBtn.disabled = false;
        button_wfrdt.disabled = false;
        button_wtrdt.disabled = false; 
        // button_wrmcBtn.disabled = false;
        button_wperidBtn.disabled = false;
        //button_wotqtyBtn.disabled = false;
        button_wbadqtyBtn.disabled = false; 
        button_worksaveBtn.disabled = false; 
        button_partbtn.disabled = false; 
        const wono_div    = document.getElementById('inwonobdg');  
        const wrmc_div       = document.getElementById('inwrmcbdg');
        const wscntdis02_div = document.getElementById('wscntdis02');   
        const wscntdis_div   = document.getElementById('wscntdis01');
        // wqtydis_div.innerHTML  = "";    
        wono_div.innerHTML     = "";    
        wrmc_div.innerHTML     = "";    
        wscntdis02_div.innerHTML  = "";    
        wscntdis_div.innerHTML = "";    
        var ls_text = "<div style='color:red'><span class='badge badge-soft-info'></span></div>";  
        btn_progress(false, false, false, false) 
        //statusdis_div.innerHTML  = ls_text;   

        
        var result = new Date();
        result.setHours(result.getHours() + 9);
        var ls_date = result.toISOString().substring(0,10);
        wkotdate.value = ls_date; 

        //생산량 초기화     
        //searchotqty_fnc();
        
    } 
    function woworkChk(arg1, arg2, arg3, arg4, arg5  ){ 
        wkotdate.value = arg1;
        // document.getElementById('popwkotDate').value= arg1; 
        document.getElementById('popwotqt').value= arg2; 
        document.getElementById('popwbdqt').value= arg3; 
        document.getElementById('popwseq').value= arg4;  
        document.getElementById('popseq').value= arg5;  
    }
    //작업지시선택 
    function selectChk(arg1, arg2, arg3, arg4, arg5 , arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13, arg14, arg15, arg16 , arg17, arg18, arg19, arg20, arg21, arg22, arg23, arg24, arg25, arg26, arg27 , arg28, arg29, arg30){ 
             // custcd, spjangcd, wono, cltnm, pname, 
            // ostore, plan_no, cltcd, pcode, wseq, 
            // wflag, phmmdoc, otqty, wrpsnm, owqty ,
            // obqty,winps,wrps,lotno,prod_qty, 
            // wrmc, wrmcnm, partcode, partnm, wbgubn, 
            // end_qty, jgumtype, jgumnm  jchajong, jpumcode
            // console.log(arg27)
            // console.log(arg28)
         if(arg20 <= arg26){
            if (!confirm("생산량이 계획량보다 같거나 큽니다. 계속하시겠습니까?")) {
                    return ; 
                } 
            // alert("계획량과 생산량을 확인하세요");
            // return 
         } 
        
        var button_workstBtn = document.getElementById('workstBtn');
        var button_workedBtn = document.getElementById('workedBtn'); 
            button_workstBtn.disabled = false;
            button_workedBtn.disabled = false;  
        document.getElementById('incustcd').value= arg1; 
        document.getElementById('inspjangcd').value= arg2; 
        document.getElementById('inwono').value= arg3; 
        document.getElementById('incltnm').value= arg4;  
        document.getElementById('inpname').value= arg5; 
        document.getElementById('inostore').value= arg6; 
        document.getElementById('inplan_no').value= arg7;
        // document.getElementById('searchPlanno').value= arg7; 
        document.getElementById('incltcd').value= arg8;  
        document.getElementById('inpcode').value= arg9;   
        document.getElementById('inwseq').value= arg10;  
        document.getElementById('inwflag').value= arg11;  
        document.getElementById('inlotno').value = ""; 
        document.getElementById('prod_qty').value= arg20;   
        document.getElementById('inpartcode').value = ""; 
        document.getElementById('inpartnm').value = "";  
        document.getElementById('insubpartcode').value = ""; 
        document.getElementById('insubpartnm').value = ""; 
        document.getElementById('inwbgubn').value= arg25;  
        document.getElementById('inwrmc').value = arg21;           //설비코드
        document.getElementById('inmachname').value  = arg22;     //설비명 
        document.getElementById('injgumtype').value  = arg27;     //금형코드 
        document.getElementById('injgumnm').value  = arg28;     //금형명
        document.getElementById('injchajong').value  = arg29;     //차종
        document.getElementById('injpumcode').value  = arg30;     //KCC 품번
        
    // document.getElementById('inphmmdoc').value= arg12;  
        wflag = arg11; //document.getElementById('inwflag').value;
        if(!wflag){wflag = "00010";} 
        wrmc = document.getElementById('inwrmc').value; 

        $("#wlistBtn").trigger("click"); 
        $("#plannoBtn").trigger("click");  
        
        // 초기화
        var gridrow = wperidGrid.rows.length; 
        for( i=0; i < gridrow; i++){ 
            wperidGrid.rows[i].isSelected = false;
        } 
        // document.getElementById('inwrmc').value = "";           //설비코드
        // document.getElementById('inmachname').value  = "";     //설비명 
        document.getElementById('inwinqt').value = 0;         //투입량
        document.getElementById('inwotqt').value = 0;         //생산수량
        document.getElementById('inwbdqt').value = 0;         //불량수량
        document.getElementById('inwokqt').value = 0;         //완료량
        document.getElementById('inwremark').value = "";     //비고
        document.getElementById('startDate').value = "";     //
        document.getElementById('endDate').value = "";     //
        document.getElementById('inwrpsnm').value = "";      //
        document.getElementById('inwinps').value = "";      //
        document.getElementById('inwrps').value = "";     //
        
        document.getElementById('instopcd').value = "";     //비가동코드
        document.getElementById('instopnm').value = "";     //비가동명

        button_workstBtn.disabled = false;
        button_workedBtn.disabled = false;
        button_wfrdt.disabled = false;
        button_wtrdt.disabled = false; 
        // button_wrmcBtn.disabled = false;
        button_wperidBtn.disabled = false;
        //button_wotqtyBtn.disabled = false;
        button_wbadqtyBtn.disabled = false; 
        button_worksaveBtn.disabled = false; 
        button_partbtn.disabled = false; 
        // const wqtydis_div = document.getElementById('wqtydis01');  
        const wono_div    = document.getElementById('inwonobdg');  
        const wrmc_div       = document.getElementById('inwrmcbdg');
        const wscntdis02_div = document.getElementById('wscntdis02');   
        const wscntdis_div   = document.getElementById('wscntdis01');
        // wqtydis_div.innerHTML  = "";    
        wono_div.innerHTML     = "";    
        wrmc_div.innerHTML     = "";    
        wscntdis02_div.innerHTML  = "";    
        wscntdis_div.innerHTML = "";    
        var ls_text = "<div style='color:red'><span class='badge badge-soft-info'></span></div>";  
        btn_progress(false, false, false, false) 
        //statusdis_div.innerHTML  = ls_text;   

        
        var result = new Date();
        result.setHours(result.getHours() + 9);
        var ls_date = result.toISOString().substring(0,10);
        wkotdate.value = ls_date; 

        //생산량 초기화     
        searchotqty_fnc();
          

    }  

        //custcd, spjangcd, wono, cltnm, pname, ostore, plan_no, cltcd, pcode, wseq, 
        //wflag, phmmdoc, otqty, wrpsnm, owqty ,obqty,winps,wrps,lotno,prod_qty, wrmc, 
        // wrmcnm, partcode, partnm, wbgubn, jgumtype , jgumnm , subpartcode, subpartnm,  jchajong
    function selectChk_02(arg1, arg2, arg3, arg4, arg5 , arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13, arg14, arg15, arg16 , arg17, arg18, arg19, arg20, arg21, arg22, arg23, arg24, arg25, arg26, arg27, arg28, arg29, arg30, arg31 ){ 
 
            // custcd, spjangcd, wono, cltnm, pname, 
            // ostore, plan_no, cltcd, pcode, wseq, 
            // wflag, phmmdoc, otqty, wrpsnm, owqty ,
            // obqty,winps,wrps,lotno,prod_qty,
            //  wrmc, wrmcnm, partcode , partnm, wbgubn, 
            //  jgumtype, jgumnm, subpartcode , subpartnm, jchajong, jpumcode
        var button_workstBtn = document.getElementById('workstBtn');
        var button_workedBtn = document.getElementById('workedBtn'); 
            button_workstBtn.disabled = false;
            button_workedBtn.disabled = false;  
        document.getElementById('incustcd').value= arg1; 
        document.getElementById('inspjangcd').value= arg2; 
        document.getElementById('inwono').value= arg3; 
        document.getElementById('incltnm').value= arg4;  
        document.getElementById('inpname').value= arg5; 
        document.getElementById('inostore').value= arg6; 
        document.getElementById('inplan_no').value= arg7;
        // document.getElementById('searchPlanno').value= arg7; 
        document.getElementById('incltcd').value= arg8;  
        document.getElementById('inpcode').value= arg9;   
        document.getElementById('inwseq').value= arg10; 

        document.getElementById('inwflag').value= arg11;  
        document.getElementById('inlotno').value= arg19;  
        document.getElementById('prod_qty').value= arg20;   
        document.getElementById('inwrmc').value  = arg21;  
        document.getElementById('inmachname').value  = arg22;     //설비명  
        document.getElementById('inpartcode').value= arg23;        //원자재코드 
        document.getElementById('inpartnm').value= arg24;           //원자재명
        document.getElementById('inwbgubn').value= arg25;         //설비코드코드 
        document.getElementById('injgumtype').value  = arg26;     //금형코드 
        document.getElementById('injgumnm').value  = arg27;     //금형명
        document.getElementById('insubpartcode').value= arg28;  //부자재코드
        document.getElementById('insubpartnm').value= arg29;    //부자재명
        document.getElementById('injchajong').value= arg30;    //차종
        document.getElementById('injpumcode').value= arg31;    //KCC품번
        
        // <input class="form-control form-control-sm" id="inwrpsnm" type="text"  disabled  placeholder=""  />
        // <input class="form-control form-control-sm" id="inwrps" type="hidden"  placeholder=""   />
        // <input class="form-control form-control-sm" id="inwinps" type="hidden"  placeholder=""   />

    // document.getElementById('inphmmdoc').value= arg12;  
        wflag = arg11; //document.getElementById('inwflag').value;
        if(!wflag){wflag = "00010";} 
        wrmc = document.getElementById('inwrmc').value; 

        $("#wlistsaBtn").trigger("click"); 
        $("#plannoBtn").trigger("click");  
        
        // 초기화
        var gridrow = wperidGrid.rows.length; 
        for( i=0; i < gridrow; i++){ 
            wperidGrid.rows[i].isSelected = false;
        } 
        document.getElementById('inwrmc').value = arg21; 
        document.getElementById('inmachname').value = arg22; 
        document.getElementById('inwinqt').value = 0;         //투입량
        document.getElementById('inwotqt').value = arg15;         //생산수량
        document.getElementById('inwbdqt').value = arg16;         //불량수량
        document.getElementById('inwokqt').value = arg13;         //완료량
        document.getElementById('inwremark').value = "";     //비고
        document.getElementById('startDate').value = "";     //
        document.getElementById('endDate').value = "";     //
        // console.log(arg16) 
        document.getElementById('inwrpsnm').value = arg14;     //
        document.getElementById('inwinps').value = arg17;     //
        document.getElementById('inwrps').value = arg18;     //
        
        document.getElementById('instopcd').value = "";     //비가동코드
        document.getElementById('instopnm').value = "";     //비가동명

        button_workstBtn.disabled = false;
        button_workedBtn.disabled = false;
        button_wfrdt.disabled = false;
        button_wtrdt.disabled = false; 
        // button_wrmcBtn.disabled = false;
        button_wperidBtn.disabled = false;
        //button_wotqtyBtn.disabled = false;
        button_wbadqtyBtn.disabled = false; 
        button_worksaveBtn.disabled = false; 
        button_partbtn.disabled = false; 
        // const wqtydis_div = document.getElementById('wqtydis01');  
        const wono_div    = document.getElementById('inwonobdg');  
        const wrmc_div       = document.getElementById('inwrmcbdg');
        const wscntdis02_div = document.getElementById('wscntdis02');   
        const wscntdis_div   = document.getElementById('wscntdis01');
        // wqtydis_div.innerHTML  = "";    
        wono_div.innerHTML     = "";    
        wrmc_div.innerHTML     = "";    
        wscntdis02_div.innerHTML  = "";    
        wscntdis_div.innerHTML = "";    
        var ls_text = "<div style='color:red'><span class='badge badge-soft-info'></span></div>";  
        btn_progress(false, false, false, false) 
        //statusdis_div.innerHTML  = ls_text;   
        $.ajax({
            url: '/input/w010',   
            type:"POST", 
            data: {
                "custcd"    : arg1,
                "spjangcd"  : arg2,
                "wono"      : arg3,
                "cltnm"     : arg4,
                "pname"     : arg5,
                "ostore"    : arg6,
                "plan_no"   : arg7,
                "lotno"     : arg19,
                "wflag"     : wflag,
                "wrmc"      : wrmc
            },
            async:false,
            success:function(data){
                //  console.log("등록OK", data); 
                // console.log("wperidGrid_Data", wperidGrid.rows.length );
                gridrow = wperidGrid.rows.length;                                    
                for( i=0; i < gridrow; i++){
                        ls_wperid =  wperidGrid.rows[i]._data.wperid; 
                        if(!ls_wperid ){continue;}  
                        for(h = 0; h < data.length; h++){
                            chk_wperid = data[h].perid;   
                            if(ls_wperid == chk_wperid){
                            // console.log("chk_wperid", chk_wperid); 
                            wperidGrid.rows[i].isSelected = true;
                            }
                        } 
                }

            },error:function(e){
                console.log('error',e);
            }
        }).done(function(fragment){           

        })                           
            
        // 자재BOM popup 상단 리스트
        $.ajax({
            url: '/input/SELW010',   
            type:"POST", 
            data: {
                "custcd"    : arg1,
                "spjangcd"  : arg2, 
                "plan_no"   : arg7,
                "lotno"     : arg19, 
                "wflag"     : wflag 
            },
            async:false,
            success:function(data){ 
                if(data.length == 0){ 
                    return 
                }
                inwrmc      =  data.wrmc;   
                inmachname  =  data.machname;   
                inwinqt     =  data.winqt;   
                inwotqt     =  data.wotqt;   
                inwbdqt     =  data.wbdqt;   
                inwokqt     =  data.wotqt - data.wbdqt;    
                inwremark   =  data.wremark;                                      
                decision    =  data.decision;  
                startDate   =  data.wfrdt;  
                endDate     =  data.wtrdt;  
                wrpsnm      =  data.wrpsnm;
                // document.getElementById('inwrmc').value = inwrmc; 
                // document.getElementById('inmachname').value = inmachname; 
                document.getElementById('inwinqt').value = inwinqt;         //투입량
                // document.getElementById('inwotqt').value = inwotqt;         //완료량
                //document.getElementById('inwbdqt').value = inwbdqt;         //불량수량
                // document.getElementById('inwokqt').value = inwokqt;         //생산수량
                document.getElementById('inwremark').value = inwremark;     //비고
                document.getElementById('startDate').value = startDate;     //
                document.getElementById('endDate').value = endDate;     // 
                //공정시작
                if (decision == "1"){  
                        button_workstBtn.disabled = false;
                        button_workedBtn.disabled = false;
                        button_wfrdt.disabled = true;
                        button_wtrdt.disabled = false; 
                        // button_wrmcBtn.disabled = false;
                        button_wperidBtn.disabled = false;
                        //button_wotqtyBtn.disabled = false;
                        button_wbadqtyBtn.disabled = false;   
                        button_partbtn.disabled = false; 
                        btn_progress(true, true, false, false)                                                              
                    // var ls_text = "<div style='color:red'><span class='badge badge-soft-info'>공정 진행중</span></div>";
                }else if(decision == "0"){
                        button_workstBtn.disabled = true;
                        button_workedBtn.disabled = true;
                        button_wfrdt.disabled = true;
                        button_wtrdt.disabled = true;   
                        // button_wrmcBtn.disabled = true;
                        button_wperidBtn.disabled = true;
                        //button_wotqtyBtn.disabled = true;
                        button_wbadqtyBtn.disabled = true; 
                        button_worksaveBtn.disabled = true;   
                        button_partbtn.disabled = true; 
                        btn_progress(false, false, false, true)                          
                    // var ls_text = "<div style='color:red'><span class='badge badge-soft-danger'>공정 완료</span></div>";
                }else if(decision == "2"){
                        button_workstBtn.disabled = true;
                        button_workedBtn.disabled = false;
                        button_wfrdt.disabled = true;
                        button_wtrdt.disabled = false;   
                        // button_wrmcBtn.disabled = false;
                        button_wperidBtn.disabled = false;
                        //button_wotqtyBtn.disabled = false;
                        button_wbadqtyBtn.disabled = false;   
                        button_partbtn.disabled = false; 
                        btn_progress(true, true, false, false)    
                    // var ls_text = "<div style='color:red'><span class='badge badge-soft-danger'>작업시작</span></div>";
                }else if(decision == "3"){
                        button_workstBtn.disabled = false;
                        button_workedBtn.disabled = true;
                        button_wfrdt.disabled = true;
                        button_wtrdt.disabled = false;   
                        // button_wrmcBtn.disabled = false;
                        button_wperidBtn.disabled = false;
                        //button_wotqtyBtn.disabled = false;
                        button_wbadqtyBtn.disabled = false;   
                        button_partbtn.disabled = false; 
                        btn_progress(true, false, true, false)  
                    // var ls_text = "<div style='color:red'><span class='badge badge-soft-danger'>작업중단</span></div>";                                        
                }else{
                        button_workstBtn.disabled = false;
                        button_workedBtn.disabled = false;
                        button_wfrdt.disabled = false;
                        button_wtrdt.disabled = false;  
                        // button_wrmcBtn.disabled = false;
                        button_wperidBtn.disabled = false;
                        //button_wotqtyBtn.disabled = false;
                        button_wbadqtyBtn.disabled = false;  
                        button_partbtn.disabled = false;  
                        btn_progress(false, false, false, false) 
                    // var ls_text = "<div style='color:red'><span class='badge badge-soft-primary'>작업지시리스트 선택</span></div>";
                }
                //statusdis_div.innerHTML  = ls_text;   
                return  false  
                // console.log("wperidGrid_Data", wperidGrid.rows.length ); 

            },error:function(e){
                console.log('error',e);
            }
        }).done(function(fragment){           

        })  
        //생산량 조회
        searchotqty_fnc()

    }  

    function wrmcChk(arg1, arg2  ){   
        document.getElementById('inwrmc').value= arg1; 
        document.getElementById('inmachname').value= arg2; 

        arg3 = document.getElementById('incustcd').value; 
        arg4 = document.getElementById('inspjangcd').value;  
        wflag = document.getElementById('inwflag').value;
        plan_no = document.getElementById('inplan_no').value;
    var ls_inlotno   = document.getElementById('inlotno').value; 
        if(!wflag){ wflag = "00010"; } 
        // $("#wlistBtn").trigger("click");  
        // $("#plannoBtn").trigger("click"); 
        // console.log("WRMC UPDATE");
        
        $.ajax({
            url: '/input/w010wrmc',   
            type:"POST", 
            data: {
                "custcd"    : arg3,
                "spjangcd"  : arg4, 
                "plan_no"   : plan_no,
                "lotno"      : ls_inlotno ,
                "wflag"     : wflag,
                "wrmc"      : arg1
            },
            async:false,
            success:function(data){
                //  console.log("작업설비등록", data); 
            },error:function(e){
                console.log('error',e);
            }
        }).done(function(fragment){           

        })  

        // var wrmcmodal_btn = document.getElementById('wrmcmodal_btn');

        $("#wrmcmodal_btn").trigger("click"); 
    }
    function wperidChk(arg1, arg2  ){   
            document.getElementById('inwrps').value= arg1; 
            document.getElementById('inwrpsnm').value= arg2;   
            $("#wperidmodal_btn").trigger("click"); 
    } 
    function wstopChk(arg1, arg2  ){   
            document.getElementById('instopcd').value= arg1; 
            document.getElementById('instopnm').value= arg2;   
            $("#wstopmodal_btn").trigger("click"); 
            save_btn("3");
    }
    function wjglistChk(arg1, arg2  ){   
            var ls_wonflag = document.getElementById('wonflag').value; 
            if (ls_wonflag == '1'){
                document.getElementById('inpartcode').value= arg1; 
                document.getElementById('inpartnm').value= arg2;   
            }else{
                document.getElementById('insubpartcode').value= arg1; 
                document.getElementById('insubpartnm').value= arg2;   
            }

            $("#wjglistmodal_btn").trigger("click");  
    }
    function searchList_rtn(arg){  
        
        if(arg == "btn01") {
            let ls_inmonth = document.getElementById('inmonth').value;  
            let ls_inweeks = document.getElementById('inweeks').value;  
            let ls_conwrmc = document.getElementById('con_wrmc').value;  
            if(ls_inmonth == null || ls_inmonth.length == 0 || ls_inmonth == "" || ls_inmonth =="월"){ 
                ls_inmonth = '%'               
            } 
            if(ls_inweeks == null || ls_inweeks.length == 0 || ls_inweeks == "" || ls_inweeks =="주차"){ 
                ls_inweeks = '%'               
            }   
            if(ls_conwrmc == null || ls_conwrmc.length == 0 || ls_conwrmc == "" || ls_conwrmc =="호기"){ 
                ls_conwrmc = '%'               
            }   
            $.ajax({
            url: '/input/w010ordlist',  
            type:"POST",
            data: { 
                    "lotno"      : "%",  
                    "inmonth"      : ls_inmonth, 
                    "inweeks"      : ls_inweeks, 
                    "wrmc"      : ls_conwrmc, 
            }, 
            async:false,
            success:function(data){ 
                var ListDto = data; 
                // console.log("ListDto : ", ListDto);
                var dataArr = [];
                var cnt = 1;
                // var today = new Date()
                // console.log("today->" + today);
                for (var i = 0; i < ListDto.length; i++) {
                    var psdate = ListDto[i]["prod_sdate"];
                    psdate = psdate.substr(0,4) + '-' + psdate.substr(4,2)+ '-' + psdate.substr(6,2); 
                    var ls_month = ListDto[i]["inmonth"];
                    var ls_weeks = ListDto[i]["inweeks"];
                    var ls_inmonth = ls_month + '' + ls_weeks + '주차';
                    // var date_format = new Date(psdate);ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode  
                        dataArr.push({
                            id: i, 
                            index: cnt,                                                                
                            prod_sdate: psdate,
                            wono: ListDto[i]["wono"], 
                            cltnm: ListDto[i]["cltnm"], 
                            pname: ListDto[i]["pname"], 
                            psize: ListDto[i]["psize"], 
                            prod_qty: ListDto[i]["prod_qty"],
                            winqt: ListDto[i]["winqt"] , 
                            wotqt: ListDto[i]["wotqt"] ,     
                            decision: ListDto[i]["decision"] ,    
                            plan_no: ListDto[i]["plan_no"] ,
                            ostore: ListDto[i]["ostore"] ,
                            custcd: ListDto[i]["custcd"] ,
                            spjangcd: ListDto[i]["spjangcd"] ,
                            cltcd: ListDto[i]["cltcd"] ,
                            wseq: ListDto[i]["wseq"]  ,
                            pcode: ListDto[i]["pcode"] ,
                            jpumcode: ListDto[i]["jpumcode"] ,
                            wflag: ListDto[i]["wflag"] ,
                            wremark: ListDto[i]["wremark"] ,
                            phmmdoc: ListDto[i]["phmmdoc"]  ,
                            owqty: ListDto[i]["owqty"] ,
                            obqty: ListDto[i]["obqty"] ,
                            otqty: ListDto[i]["otqty"] ,
                            wrpsnm: ListDto[i]["wrpsnm"]  ,
                            winps: ListDto[i]["winps"]  ,
                            wrps: ListDto[i]["wrps"]  ,
                            lotno: ListDto[i]["lotno"] ,
                            wrmc: ListDto[i]["wrmc"] , 
                            wrmcnm: ListDto[i]["wrmcnm"] ,
                            partcode: ListDto[i]["partcode"] ,
                            partnm: ListDto[i]["partnm"] ,
                            wbgubn: ListDto[i]["w_b_gubn"] ,
                            end_qty: ListDto[i]["end_qty"]  ,
                            jchajong: ListDto[i]["jchajong"]  ,
                            jgumnm: ListDto[i]["jgumnm"]  ,
                            jgumtype: ListDto[i]["jgumtype"]  ,
                            inmonth: ls_inmonth
                        });
                    cnt++;
                    }   
                wtab01Grid.columns.clear();  
                wtab01Grid.autoGenerateColumns = false; 
                view_flistpage.sourceCollection  = dataArr;
                var cols = new wijmo.grid.Column(); 
                cols.binding = 'wrmcnm';
                cols.header = '호기';
                cols.align = "center";
                cols.width = 100 ; 
                wtab01Grid.columns.push(cols);   

                cols = new wijmo.grid.Column(); 
                cols.binding = 'prod_sdate';
                cols.header = '일자';
                cols.align = "center";
                cols.width = 120 ; 
                cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                    text: '<b>${item.prod_sdate}</b>',
                    click: (e, ctx) => {                        
                        selectChk(ctx.item.custcd, ctx.item.spjangcd, ctx.item.wono, ctx.item.cltnm, ctx.item.pname, ctx.item.ostore, ctx.item.plan_no, ctx.item.cltcd, ctx.item.pcode, ctx.item.wseq, ctx.item.wflag, ctx.item.phmmdoc, ctx.item.otqty, ctx.item.wrpsnm, ctx.item.owqty ,ctx.item.obqty,ctx.item.winps,ctx.item.wrps,ctx.item.lotno,ctx.item.prod_qty, ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode , ctx.item.partnm, ctx.item.wbgubn, ctx.item.end_qty,  ctx.item.jgumtype,  ctx.item.jgumnm, ctx.item.jchajong, ctx.item.jpumcode);
                    }
                });
                wtab01Grid.columns.push(cols);   

                cols = new wijmo.grid.Column(); 
                cols.binding = 'inmonth';
                cols.header = '주차';
                cols.align = "center";
                cols.width = 130 ; 
                cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                    text: '<b>${item.inmonth}</b>',
                    click: (e, ctx) => {                        
                        selectChk(ctx.item.custcd, ctx.item.spjangcd, ctx.item.wono, ctx.item.cltnm, ctx.item.pname, ctx.item.ostore, ctx.item.plan_no, ctx.item.cltcd, ctx.item.pcode, ctx.item.wseq, ctx.item.wflag, ctx.item.phmmdoc, ctx.item.otqty, ctx.item.wrpsnm, ctx.item.owqty ,ctx.item.obqty,ctx.item.winps,ctx.item.wrps,ctx.item.lotno,ctx.item.prod_qty, ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode , ctx.item.partnm, ctx.item.wbgubn, ctx.item.end_qty,  ctx.item.jgumtype,  ctx.item.jgumnm, ctx.item.jchajong, ctx.item.jpumcode);
                    }
                });
                wtab01Grid.columns.push(cols);   

                cols = new wijmo.grid.Column(); 
                cols.binding = 'pname';
                cols.header = '품목명';
                cols.align = "center";
                cols.width = 150 ; 
                cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                    text: '<b>${item.pname}</b>',
                    click: (e, ctx) => {                        
                        selectChk(ctx.item.custcd, ctx.item.spjangcd, ctx.item.wono, ctx.item.cltnm, ctx.item.pname, ctx.item.ostore, ctx.item.plan_no, ctx.item.cltcd, ctx.item.pcode, ctx.item.wseq, ctx.item.wflag, ctx.item.phmmdoc, ctx.item.otqty, ctx.item.wrpsnm, ctx.item.owqty ,ctx.item.obqty,ctx.item.winps,ctx.item.wrps,ctx.item.lotno,ctx.item.prod_qty, ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode , ctx.item.partnm, ctx.item.wbgubn, ctx.item.end_qty,  ctx.item.jgumtype,  ctx.item.jgumnm, ctx.item.jchajong, ctx.item.jpumcode);
                    }
                });
                wtab01Grid.columns.push(cols);   

                // cols = new wijmo.grid.Column(); 
                // cols.binding = 'plan_no';
                // cols.header = '작지번호';
                // cols.align = "center";
                // cols.width = 150 ; 
                // wtab01Grid.columns.push(cols);  
                // cols = new wijmo.grid.Column(); 
                // cols.binding = 'cltnm';
                // cols.header = '거래처';
                // cols.align = "center";
                // cols.width = 100 ; 
                // wtab01Grid.columns.push(cols);  
                // cols = new wijmo.grid.Column(); 
                // cols.binding = 'pcode';
                // cols.header = '품목코드';
                // cols.align = "center";
                // cols.width = '2*' ;  
                // wtab01Grid.columns.push(cols);  
                // cols = new wijmo.grid.Column(); 
                // cols.binding = 'phmmdoc';
                // cols.header = '도면번호';
                // cols.align = "center";
                // cols.width = '2*' ;  
                // wtab01Grid.columns.push(cols);   
                cols = new wijmo.grid.Column(); 
                cols.binding = 'jchajong';
                cols.header = '차종';
                cols.align = "center";
                cols.width = 100 ; 
                wtab01Grid.columns.push(cols);  
                cols = new wijmo.grid.Column(); 
                cols.binding = 'psize';
                cols.header = '규격';
                cols.align = "center";
                cols.width = 100 ; 
                wtab01Grid.columns.push(cols);  
                cols = new wijmo.grid.Column(); 
                cols.binding = 'jgumnm';
                cols.header = '금형';
                cols.align = "left";
                cols.width = 150 ; 
                wtab01Grid.columns.push(cols);  
                cols = new wijmo.grid.Column(); 
                cols.binding = 'prod_qty';
                cols.header = '계획량';
                cols.align = "center";
                cols.width = 100 ; 
                wtab01Grid.columns.push(cols);  
                cols = new wijmo.grid.Column(); 
                cols.binding = 'end_qty';
                cols.header = '생산량';
                cols.align = "center";
                cols.width = 100 ; 
                wtab01Grid.columns.push(cols);  



            },error:function(e){
                console.log("error");
                // alert(data.code);
                // alert(data.message);
            }
            }).done(function(fragment){           

            })   

        }else{  
            let ls_inmonth = document.getElementById('inmonth_sa').value;  
            let ls_inweeks = document.getElementById('inweeks_sa').value; 
            let ls_searchtxt = document.getElementById('searchtxt').value; 
            if(ls_inmonth == null || ls_inmonth.length == 0 || ls_inmonth == "" || ls_inmonth =="월"){ 
                ls_inmonth = '%'               
            } 
            if(ls_inweeks == null || ls_inweeks.length == 0 || ls_inweeks == "" || ls_inweeks =="주차"){ 
                ls_inweeks = '%'               
            }   
            if(ls_searchtxt == null || ls_searchtxt.length == 0 || ls_searchtxt == "" ){ 
                ls_searchtxt = '%'               
            }  
            // console.log(ls_searchtxt)
            // console.log(ls_inmonth)
            // console.log(ls_inweeks)
            $.ajax({
                url: '/input/w010Sachullist',  
                type:"POST",
                data: { 
                        "lotno"      : ls_searchtxt,  
                        "inmonth"      : ls_inmonth, 
                        "inweeks"      : ls_inweeks, 
                }, 
                async:false,
                success:function(data){ 
                    var ListDto = data; 
                     console.log("ListDto222 : ", ListDto);
                    var dataArr = [];
                    var cnt = 1;
                    // var today = new Date()
                    // console.log("today->" + today);
                    for (var i = 0; i < ListDto.length; i++) {
                        var psdate = ListDto[i]["prod_sdate"];
                        psdate = psdate.substr(0,4) + '-' + psdate.substr(4,2)+ '-' + psdate.substr(6,2); 
                        var ls_month = ListDto[i]["inmonth"];
                        var ls_weeks = ListDto[i]["inweeks"];
                        var ls_inmonth = ls_month + '' + ls_weeks + '주차';
                        var ls_decision= ListDto[i]["decision"];
                        if(ls_decision == "3"){
                            ls_decision = "작업완료";
                        }else{
                            ls_decision = "진행중";
                        }
                        // var date_format = new Date(psdate);ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode  
                        dataArr.push({
                            id: i, 
                            index: cnt,                                                                
                            prod_sdate: psdate,
                            wono: ListDto[i]["wono"], 
                            cltnm: ListDto[i]["cltnm"], 
                            pname: ListDto[i]["pname"], 
                            psize: ListDto[i]["psize"], 
                            prod_qty: ListDto[i]["prod_qty"],
                            winqt: ListDto[i]["winqt"] , 
                            wotqt: ListDto[i]["wotqt"] ,     
                            decision: ls_decision,    
                            plan_no: ListDto[i]["plan_no"] ,
                            ostore: ListDto[i]["ostore"] ,
                            custcd: ListDto[i]["custcd"] ,
                            spjangcd: ListDto[i]["spjangcd"] ,
                            cltcd: ListDto[i]["cltcd"] ,
                            wseq: ListDto[i]["wseq"]  ,
                            pcode: ListDto[i]["pcode"] ,
                            jpumcode: ListDto[i]["jpumcode"] ,
                            wflag: ListDto[i]["wflag"] ,
                            wremark: ListDto[i]["wremark"] ,
                            phmmdoc: ListDto[i]["phmmdoc"]  ,
                            owqty: ListDto[i]["owqty"] ,
                            obqty: ListDto[i]["obqty"] ,
                            otqty: ListDto[i]["otqty"] ,
                            winps: ListDto[i]["winps"]  ,
                            wrps: ListDto[i]["wrps"]  ,
                            wrpsnm: ListDto[i]["wrpsnm"]  ,
                            lotno: ListDto[i]["lotno"] ,
                            wrmc: ListDto[i]["wrmc"] ,
                            wrmcnm: ListDto[i]["wrmcnm"] ,
                            partcode: ListDto[i]["partcode"] ,
                            partnm: ListDto[i]["partnm"] ,
                            subpartcode: ListDto[i]["subpartcode"] ,
                            subpartnm: ListDto[i]["subpartnm"] ,
                            wbgubn: ListDto[i]["w_b_gubn"] ,
                            end_qty: ListDto[i]["end_qty"]  ,
                            jchajong: ListDto[i]["jchajong"]  ,
                            jgumnm: ListDto[i]["jgumnm"]  ,
                            jgumtype: ListDto[i]["jgumtype"]  , 
                            inmonth: ls_inmonth


                        });
                        cnt++;
                    }   
                    wtabsaGrid.columns.clear();  
                    wtabsaGrid.autoGenerateColumns = false; 
                    view_salistpage.sourceCollection  = dataArr;
                    var cols = new wijmo.grid.Column(); 
                    cols.binding = 'wrmcnm';
                    cols.header = '호기';
                    cols.align = "center";
                    cols.width = 100 ; 
                    wtabsaGrid.columns.push(cols);   
                    cols = new wijmo.grid.Column(); 
                    cols.binding = 'prod_sdate';
                    cols.header = '일자';
                    cols.align = "center";
                    cols.width = 120 ; 
                    wtabsaGrid.columns.push(cols);   
                    cols = new wijmo.grid.Column(); 
                    cols.binding = 'inmonth';
                    cols.header = '주차';
                    cols.align = "center";
                    cols.width = 130 ; 
                    cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.inmonth}</b>',
                        click: (e, ctx) => {                        
                            selectChk_02(ctx.item.custcd, ctx.item.spjangcd, ctx.item.wono, ctx.item.cltnm, ctx.item.pname,ctx.item.ostore, ctx.item.plan_no, ctx.item.cltcd, ctx.item.pcode, ctx.item.wseq, ctx.item.wflag, ctx.item.phmmdoc, ctx.item.otqty, ctx.item.wrpsnm, ctx.item.owqty ,ctx.item.obqty,ctx.item.winps,ctx.item.wrps,ctx.item.lotno,ctx.item.prod_qty, ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode , ctx.item.partnm, ctx.item.wbgubn, ctx.item.jgumtype, ctx.item.jgumnm,  ctx.item.subpartcode, ctx.item.subpartnm, ctx.item.jchajong, ctx.item.jpumcode );
                        }
                    });
                     
                    wtabsaGrid.columns.push(cols);   
                    cols = new wijmo.grid.Column(); 
                    cols.binding = 'lotno';
                    cols.header = 'LotNo';
                    cols.align = "center";
                    cols.width = 150 ; 
                    cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.lotno}</b>',
                        click: (e, ctx) => {                        
                            selectChk_02(ctx.item.custcd, ctx.item.spjangcd, ctx.item.wono, ctx.item.cltnm, ctx.item.pname,ctx.item.ostore, ctx.item.plan_no, ctx.item.cltcd, ctx.item.pcode, ctx.item.wseq, ctx.item.wflag, ctx.item.phmmdoc, ctx.item.otqty, ctx.item.wrpsnm, ctx.item.owqty ,ctx.item.obqty,ctx.item.winps,ctx.item.wrps,ctx.item.lotno,ctx.item.prod_qty, ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode , ctx.item.partnm, ctx.item.wbgubn, ctx.item.jgumtype, ctx.item.jgumnm,  ctx.item.subpartcode, ctx.item.subpartnm, ctx.item.jchajong, ctx.item.jpumcode );
                        }
                    });
                    wtabsaGrid.columns.push(cols);  
                    // cols = new wijmo.grid.Column(); 
                    // cols.binding = 'plan_no';
                    // cols.header = '작지번호';
                    // cols.align = "center";
                    // cols.width = 150 ; 
                    // cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                    //     text: '<b>${item.plan_no}</b>',
                    //     click: (e, ctx) => {                        
                    //         selectChk_02(ctx.item.custcd, ctx.item.spjangcd, ctx.item.wono, ctx.item.cltnm, ctx.item.pname, ctx.item.ostore, ctx.item.plan_no, ctx.item.cltcd, ctx.item.pcode, ctx.item.wseq, ctx.item.wflag, ctx.item.phmmdoc, ctx.item.otqty, ctx.item.wrpsnm, ctx.item.owqty ,ctx.item.obqty,ctx.item.winps,ctx.item.wrps,ctx.item.lotno,ctx.item.prod_qty, ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode , ctx.item.partnm, ctx.item.wbgubn );
                    //     }
                    // });
                    // wtabsaGrid.columns.push(cols);  
                    // cols = new wijmo.grid.Column(); 
                    // cols.binding = 'cltnm';
                    // cols.header = '거래처';
                    // cols.align = "center";
                    // cols.width = 100 ; 
                    // wtabsaGrid.columns.push(cols);  
                    // cols = new wijmo.grid.Column(); 
                    // cols.binding = 'pcode';
                    // cols.header = '품목코드';
                    // cols.align = "center";
                    // cols.width = '2*' ;  
                    // wtabsaGrid.columns.push(cols);  
                    cols = new wijmo.grid.Column(); 
                    cols.binding = 'pname';
                    cols.header = '품목명';
                    cols.align = "center";
                    cols.width = 150 ; 
                    cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                        text: '<b>${item.pname}</b>',
                        click: (e, ctx) => {                        
                            selectChk_02(ctx.item.custcd, ctx.item.spjangcd, ctx.item.wono, ctx.item.cltnm, ctx.item.pname,ctx.item.ostore, ctx.item.plan_no, ctx.item.cltcd, ctx.item.pcode, ctx.item.wseq, ctx.item.wflag, ctx.item.phmmdoc, ctx.item.otqty, ctx.item.wrpsnm, ctx.item.owqty ,ctx.item.obqty,ctx.item.winps,ctx.item.wrps,ctx.item.lotno,ctx.item.prod_qty, ctx.item.wrmc, ctx.item.wrmcnm, ctx.item.partcode , ctx.item.partnm, ctx.item.wbgubn, ctx.item.jgumtype, ctx.item.jgumnm,  ctx.item.subpartcode, ctx.item.subpartnm, ctx.item.jchajong , ctx.item.jpumcode);
                        }
                    });
                    wtabsaGrid.columns.push(cols);  
                    // cols = new wijmo.grid.Column(); 
                    // cols.binding = 'phmmdoc';
                    // cols.header = '도면번호';
                    // cols.align = "center";
                    // cols.width = '2*' ;  
                    // wtabsaGrid.columns.push(cols);   
                    cols = new wijmo.grid.Column(); 
                    cols.binding = 'jchajong';
                    cols.header = '차종';
                    cols.align = "center";
                    cols.width = 100 ; 
                    wtabsaGrid.columns.push(cols);  
                    cols = new wijmo.grid.Column(); 
                    cols.binding = 'jgumnm';
                    cols.header = '금형';
                    cols.align = "left";
                    cols.width = 130 ; 
                    wtabsaGrid.columns.push(cols);  
                    cols = new wijmo.grid.Column(); 
                    cols.binding = 'prod_qty';
                    cols.header = '계획량';
                    cols.align = "center";
                    cols.width = 100 ; 
                    wtabsaGrid.columns.push(cols);  
                    cols = new wijmo.grid.Column(); 
                    cols.binding = 'otqty';
                    cols.header = '생산량';
                    cols.align = "center";
                    cols.width = 100 ; 
                    wtabsaGrid.columns.push(cols);  
                    cols = new wijmo.grid.Column(); 
                    cols.binding = 'decision';
                    cols.header = '상태';
                    cols.align = "center";
                    cols.width = 100 ; 
                    wtabsaGrid.columns.push(cols);  

            },error:function(e){
                console.log("error");
                // alert(data.code);
                // alert(data.message);
            }
        }).done(function(fragment){           

             })   

        }


        }        



    //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    
    //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    //생산량 조회  
    document.getElementById("popsearch01").addEventListener("click",function(){
        searchotqty_fnc()
    })    

    function searchotqty_fnc(){
        var ls_plan_no   = document.getElementById('inplan_no').value; 
        var ls_inlotno   = document.getElementById('inlotno').value; 
        var ls_inpcode   = document.getElementById('inpcode').value; 
        var ls_inwono   = document.getElementById('inwono').value; 
        var ls_wflag = '00010' 


        if(ls_plan_no == null || ls_plan_no.length == 0 || ls_plan_no == ""){ 
                alert("작업지시서를 선택 하세요")  
                return ;               
        }     

        $.ajax({
            url: '/popup/oworklist',  
            type:"POST",
            data: {
                "plan_no" : ls_plan_no,
                "lotno"      : ls_inlotno, 
                "inpcode" : ls_inpcode ,
                "inwono" : ls_inwono ,
                "wflag" : ls_wflag ,
            },
            success:function(data){
                var wrmcDto  = data;  
                var wrmc_data = [];
                var cnt = 1;
                var ll_totwqty = 0;
                var ll_totbqty = 0;
                var ll_totqty = 0;
                var rowcnt = wrmcDto.length; 
                if(rowcnt  == null || rowcnt == 0){ 
                    for (var i = 0; i < 10; i++) {
                        wrmc_data.push({
                            id: i, 
                            index: cnt,
                            plan_no: "",
                            wseq: "",
                            seq: "",
                            pcode: "",
                            pname:  "",
                            pgugek: "",
                            wotdt: 0,
                            wqty: 0,
                            bqty: 0,
                            qty: 0  
                        });
                        cnt++;
                    }  

                }else{
                    for (var i = 0; i < wrmcDto.length; i++) {
                        wrmc_data.push({
                            id: i, 
                            index: cnt,
                            plan_no:wrmcDto[i]["plan_no"],
                            wseq:wrmcDto[i]["wseq"],
                            seq:wrmcDto[i]["seq"],
                            pcode:wrmcDto[i]["pcode"],
                            pname: wrmcDto[i]["pname"], 
                            pgugek: wrmcDto[i]["psize"],
                            wotdt: wrmcDto[i]["wotdt"],
                            wqty: wrmcDto[i]["wqty"],
                            bqty: wrmcDto[i]["bqty"],
                            qty: wrmcDto[i]["qty"],                                          
                        });
                        cnt++;
                        if(!isNaN(wrmcDto[i]["wqty"])){ 
                            ll_totwqty = ll_totwqty + wrmcDto[i]["wqty"];
                        }
                        if(!isNaN(wrmcDto[i]["bqty"])){ 
                            ll_totbqty = ll_totbqty + wrmcDto[i]["bqty"];
                        }
                        if(!isNaN(wrmcDto[i]["qty"])){ 
                            ll_totqty = ll_totqty + wrmcDto[i]["qty"];
                        }  
                    //    console.log('bqty->' + wrmcDto[i]["bqty"]) ;
                    }  
                }    
                document.getElementById('inwotqt').value = ll_totwqty; 
                ll_totbqty = document.getElementById('inwbdqt').value; 
                document.getElementById('inwokqt').value = ll_totwqty - ll_totbqty; 

                wotqtGrid.columns.clear();   
                wotqtGrid.autoGenerateColumns = false; 
                view_wotqtpage.sourceCollection  = wrmc_data; 
                // var cols = new wijmo.grid.Column(); 
                // cols.binding = 'pcode';
                // cols.header = '품목코드';
                // cols.width = 150;
                // wotqtGrid.columns.push(cols);  
                var cols = new wijmo.grid.Column(); 
                cols.binding = 'pname';
                cols.header = '품명';
                cols.width = 150;
                wotqtGrid.columns.push(cols);  
                cols = new wijmo.grid.Column(); 
                cols.binding = 'pgugek';
                cols.header = '규격';
                cols.width = 150;
                wotqtGrid.columns.push(cols);  
                cols = new wijmo.grid.Column(); 
                cols.binding = 'wotdt';
                cols.header = '생산일자';
                cols.width = 120;
                cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                    text: '<b>${item.wotdt}</b>',
                    click: (e, ctx) => {
                        woworkChk(ctx.item.wotdt, ctx.item.wqty, ctx.item.bqty, ctx.item.wseq, ctx.item.seq);
                    }
                });
                wotqtGrid.columns.push(cols);    
                // console.log("cols", cols);  
                cols = new wijmo.grid.Column(); 
                cols.binding = 'wqty';
                cols.header = '생산량';
                cols.width = 80;
                cols.align = "right";
                cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({ 
                    text: '<b>${item.wqty}</b>',
                    click: (e, ctx) => {
                        woworkChk(ctx.item.wotdt, ctx.item.wqty, ctx.item.bqty, ctx.item.wseq, ctx.item.seq);
                    }
                });
                wotqtGrid.columns.push(cols);  
                // cols = new wijmo.grid.Column(); 
                // cols.binding = 'bqty';
                // cols.header = '불량';
                // cols.width = 80;
                // cols.align = "right";
                // wotqtGrid.columns.push(cols);  
                cols = new wijmo.grid.Column(); 
                cols.binding = 'qty';
                cols.header = '제품량';
                cols.width = 80;
                cols.align = "right";
                wotqtGrid.columns.push(cols);  

                
                // document.getElementById('popwkotDate').value= ""; 
                document.getElementById('popwotqt').value= ""; 
                // document.getElementById('popwbdqt').value= ""; 
                document.getElementById('popwseq').value= "";  
                document.getElementById('popseq').value= "";  
            },error:function(e){
                alert(data.code); 
            }
        }).done(function(fragment){           

        }) 
    } 

 
    //$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    //불량수량 조회  
    document.getElementById("popsearch03").addEventListener("click",function(){
        searchbadqty_fnc()
    })  
    
    
    function searchbadqty_fnc(){
        var ls_plan_no   = document.getElementById('inplan_no').value; 
        var ls_inlotno   = document.getElementById('inlotno').value;  
        var ls_wflag = '00010' 
 

        if(ls_plan_no == null || ls_plan_no.length == 0 || ls_plan_no == ""){ 
                alert("작업지시서를 선택 하세요")  
                return ;               
        }     

        $.ajax({
            url: '/popup/wbad',  
            type:"POST",
            data: {
                "plan_no" : ls_plan_no,
                "lotno"      : ls_inlotno,  
                "wflag" : ls_wflag ,
            },
            success:function(data){
                var WbadDto  = data;  
                var wbad_data = [];
                var cnt = 1; 
                var ll_totbqty = 0;
                var rowcnt = WbadDto.length; 
                if(rowcnt  == null || rowcnt == 0){ 
                    for (var i = 0; i < 10; i++) {
                        wbad_data.push({
                            id: i, 
                            index: cnt,
                            plan_no: "",
                            wseq: "",
                            seq: "",
                            pcode: "",
                            pname:  "",
                            pgugek: "",
                            wotdt: 0,
                            wqty: 0,
                            bqty: 0,
                            qty: 0  
                        });
                        cnt++;
                    }  

                }else{
                    for (var i = 0; i < WbadDto.length; i++) {
                        wbad_data.push({
                            id: i, 
                            index: cnt,
                            wcode:WbadDto[i]["wcode"],
                            wcdnm: WbadDto[i]["wcdnm"], 
                            wbqty: WbadDto[i]["wbqty"],
                            wseq : WbadDto[i]["wseq"] ,
                            plan_no : WbadDto[i]["plan_no"]                                          
                        });
                        cnt++;
                        if(!isNaN(WbadDto[i]["wbqty"])){ 
                            ll_totbqty = ll_totbqty + WbadDto[i]["wbqty"];
                        } 
                    //    console.log('bqty->' + wrmcDto[i]["bqty"]) ;
                    }  
                }     
                document.getElementById('inwbdqt').value = ll_totbqty;  
 
                wbadGrid.columns.clear();   
                wbadGrid.autoGenerateColumns = false; 
                view_wbadpage.sourceCollection  = wbad_data;  
                var cols = new wijmo.grid.Column(); 
                cols.binding = 'wcode';
                cols.header = '코드';
                cols.align = "center";
                cols.width = 100;
                wbadGrid.columns.push(cols);  
                cols = new wijmo.grid.Column(); 
                cols.binding = 'wcdnm';
                cols.header = '불량구분';
                cols.align = "center";
                cols.width = 150;
                wbadGrid.columns.push(cols);  
                cols = new wijmo.grid.Column(); 
                cols.binding = 'wbqty';
                cols.header = '불량수량';
                cols.align = "right";
                cols.width = 150; 
                wbadGrid.columns.push(cols);    
                // cols = new wijmo.grid.Column(); 
                // cols.binding = 'wseq';
                // cols.header = '순번';
                // cols.width = 80;  
                // wbadGrid.columns.push(cols);     
                document.getElementById('con_wrmc').value= "";   
                document.getElementById('popbadqty').value= 0;  
            },error:function(e){
                alert(data.code); 
            }
        }).done(function(fragment){           

        }) 
    } 


    $(document).ready(function() {
        //fn_egov_init_date()
        getToday()
        // $('datetimepicker').datetimepicker({
            
        // }); 

        // $("#startDate").change(function(e){ 
        //     console.log("달력클릭");
        //     console.log(convert_time(e.timestamp));
        // })

    })

    function convert_time(timestamp){ 
        //현재시간
        var date = new Date(timestamp); 
        var year = date.getFullYear();
        var month = ("0" + (1 + date.getMonth())).slice(-2);
        var day = ("0" + date.getDate()).slice(-2); 
        var hh = date.getHours();  
        var min = ('0' + date.getMinutes()).slice(-2) 
        // console.log('year',year); 
        // console.log('month',month); 
        // console.log('day',day); 
        // console.log('hh',hh); 
        // console.log('min',min); 
        time = year +  month +  day + ' ' + hh + ':' + min ;
        return time;  
    }
    
    function convert_date(arg_date){  
        var ls_arg_date = String(arg_date); 
        if(ls_arg_date == null || ls_arg_date.length == 0 || ls_arg_date == ""|| ls_arg_date == "null"){  
            return "";
        }  
        // Date 객체로 변환
        const dateObj = new Date(arg_date);

        // 년, 월, 일 추출 (월은 0부터 시작하므로 +1 필요)
        const year = dateObj.getFullYear();
        const month = String(dateObj.getMonth() + 1).padStart(2, '0');
        const day = String(dateObj.getDate()).padStart(2, '0');

        // "YYYY-MM-DD" 형식으로 변환
        const formattedDate = `${year}${month}${day}`;
        arg_date = formattedDate; 
        return arg_date; 
        // var ls_arg_date = String(arg_date); 
        // if(ls_arg_date == null || ls_arg_date.length == 0 || ls_arg_date == ""|| ls_arg_date == "null"){  
        //     return "";
        // }
        // //arg_date.setDate(arg_date.getDate() + 1);  // 바로반환하면 하루 이전일자를 반환하여 +1일 해줌.                 
        // arg_date.setHours(arg_date.getHours() + 9);
        // arg_date =  String(arg_date.toISOString().substring(0,10)); 
        // arg_date = arg_date.replaceAll("-",""); 
        // return arg_date;
    }
    function getToday(){
        let today = new Date();

        let year = today.getFullYear(); // 년도
        let month = today.getMonth() + 1;  // 월
        let date = today.getDate();  // 날짜
        let day = today.getDay();  // 요일
        if(date > 0 && date < 10) {date = "0" + date};
        if(month > 0 && month < 10) {month = "0" + month};
        let ls_frday = year + '-' + month + '-01'
        let ls_today = year + '-' + month + '-' + date


        
        // 일반 입력 날짜
        wkotdate = new wijmo.input.InputDate('#popwkotDate', {
            isRequired: false,
            value: null,
            placeholder: '',
            format: 'yyyy-MM-dd', 
        });

 
        var result = new Date();
        result.setHours(result.getHours() + 9);
        var ls_date = result.toISOString().substring(0,10);
        wkotdate.value = ls_date;  

        // console.log(ls_today); 
        //document.getElementById('popwkotDate').value = ls_today;
        // document.getElementById('searchOrdDate').value = ls_today; 
        showCurrentDate(ls_today, 5); 
    }

    // 현재 선택된 날짜 + 5일
    function showCurrentDate(ctrl, days) {
        var ls_sdate = ctrl;
        //console.log(ls_sdate)     
        if(ls_sdate == null || ls_sdate.length == 0 || ls_sdate == ""){ 
            return;         
        }  
        var result = new Date(ls_sdate);

        const month = result.getMonth()  ;
        const weekOfMonth = getWeekOfMonth(result);  
        // 월 이름 배열
        const monthNames = ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월']; 
        // 해당 월 이름을 가져옴
        const monthName = monthNames[month];
        // const month = ls_sdate.toLocaleString('default', { month: 'long' });  
        document.getElementById('inmonth').value = monthName;
        document.getElementById('inweeks').value = weekOfMonth;  
        document.getElementById('inmonth_sa').value = monthName;
        document.getElementById('inweeks_sa').value = weekOfMonth;  
 
    }   
    function getWeekOfMonth(date) { 
        const startDate = new Date(date.getFullYear(), date.getMonth(), 1);
        const dayOfWeek = startDate.getDay(); 
        const dayOfMonth = date.getDate();
        return Math.ceil((dayOfMonth + dayOfWeek) / 7);
    }

    function fn_egov_init_date(){ 
        var $startDate = $('#startDate');
        var $endDate = $('#endDate');
        var $searchOrdDate = $('#searchOrdDate');
        var $popwkotDate = $('#popwkotDate');
        
        $startDate.datetimepicker({
            timepicker: true,
            lang: 'ko',
            format: 'Y-m-d H:i',
            scrollMonth: false,
            scrollInput: false,
            onShow: function (ct) {                                    
                this.setOptions({
                    maxDate: $endDate.val() ? $endDate.val() : false
                })
            },
        });

        $endDate.datetimepicker({
            timepicker: true,
            lang: 'ko',
            format: 'Y-m-d H:i',
            scrollMonth: false,
            scrollInput: false,
            onShow: function (ct) {
                this.setOptions({
                    minDate: $startDate.val() ? $startDate.val() : false
                })
            }
        });

        $searchOrdDate.datetimepicker({
            timepicker: false,
            lang: 'ko',
            format: 'Y-m-d',
            scrollMonth: false,
            scrollInput: false,
            onShow: function (ct) {
                this.setOptions({
                    // minDate: $searchOrdDate.val() ? $searchOrdDate.val() : false
                })
            }
        });

        $popwkotDate.datetimepicker({
            timepicker: false,
            lang: 'ko',
            format: 'Y-m-d',
            scrollMonth: false,
            scrollInput: false,
            onShow: function (ct) {
                this.setOptions({
                    // minDate: $searchOrdDate.val() ? $searchOrdDate.val() : false
                })
            }
        }); 
        
    }
    
</script> 

                            
                    <!-- ######################### ######################### ######################### ######################### ######################### ######################### -->
                    </body> 
                </div>
                    <!------footer ------>
                    <!-- <footer th:replace="layouts/XDashBoard/XDashBoard_footer :: XDashBoard_footer"></footer> -->
                    <!--------------------->  
            </div>
        </main>
    </div>
</header>